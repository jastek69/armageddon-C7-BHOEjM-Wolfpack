Design goals
  EC2 is private (no public IP)
  No SSH required (use SSM Session Manager)
  Private subnets don’t need NAT to talk to AWS control-plane services
  Use VPC Interface Endpoints for:
    SSM, EC2Messages, SSMMessages (Session Manager)
    CloudWatch Logs
    Secrets Manager
    KMS (optional but realistic)
Use S3 Gateway Endpoint (common “gotcha” for private environments)
Tighten IAM: GetSecretValue only for your secret, GetParameter(s) only for your path

Note: If you remove NAT entirely, OS package installs can be tricky unless repos are reachable (often via S3). This skeleton gives you S3 endpoint and leaves NAT as optional “student choice.” In many orgs, teams use golden AMIs or image pipelines to avoid yum/apt internet needs in private subnets.


Student verification (CLI) for Bonus-A #Note: AWS CLI
1) Prove EC2 is private (no public IP)
  aws ec2 describe-instances \
  --instance-ids i-020a30b7f0d85c8d9 \
  --query "Reservations[].Instances[].PublicIpAddress"

Expected: 
  null
  #notes added private instance proof

  aws ec2 describe-instances \
  --instance-ids i-020a30b7f0d85c8d9 \
  --query "Reservations[].Instances[].PrivateIpAddress" \
  --output table

2) Prove VPC endpoints exist #Note: AWS CLI
  aws ec2 describe-vpc-endpoints \
  --filters "Name=vpc-id,Values=vpc-0ecc5a950db3db1de" \
  --query "VpcEndpoints[].ServiceName" \
  --output table

Expected: list includes:
  ssm 
  ec2messages 
  ssmmessages 
  logs 
  secretsmanager
  s3

3) Prove Session Manager path works (no SSH) 
  aws ssm describe-instance-information \
  --query "InstanceInformationList[].InstanceId" \
  --output table

Expected: your private EC2 instance ID appears

#Note: Start Session Manager
aws ssm start-session \
    --target i-07f20266a632919ce

4) Prove the instance can read both config stores #Note: Start Session Manager
Run from SSM session:
  aws ssm get-parameter --name /armageddon/1b/database/endpoint
  aws secretsmanager get-secret-value --secret-id lab1a-rds-mysql-v28

5) Prove CloudWatch logs delivery path is available via endpoint
  aws logs describe-log-streams \
    --log-group-name /aws/ec2/armageddon-7.0-lab/ec2-to-rds-logs

How this maps to “real company” practice (short, employer-credible)
  Private compute + SSM is standard in regulated orgs and mature cloud shops.
  VPC endpoints reduce exposure and dependency on NAT for AWS APIs.
  Least privilege is not optional in security interviews.
  Terraform submission mirrors how teams ship changes: PR → plan → review → apply → monitor.




