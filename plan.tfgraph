{"format_version":"1.2","terraform_version":"1.14.3","variables":{"alb_5xx_evaluation_periods":{"value":1},"alb_5xx_period_seconds":{"value":300},"alb_5xx_threshold":{"value":10},"alb_access_logs_prefix":{"value":"armageddon-alb-access-logs"},"app_subdomain":{"value":"app"},"certificate_validation_method":{"value":"DNS"},"db_parameters_for_ssm_parameter":{"value":{"endpoint":"lab-mysql.c23c4ck0msxh.us-east-1.rds.amazonaws.com","name":"lab-mysql","port":"3306"}},"domain_name":{"value":"madibamaximus.click"},"eip":{"value":["Tokyo-eip","NY-eip","London-eip","Sao-Paulo-eip","Sydney-eip","Hong-Kong-eip","California-eip"]},"enable_alb_access_logs":{"value":true},"enable_waf":{"value":true},"igw":{"value":["Tokyo_app1_IG","NY_app1_IG","London_app1_IG","Sao-Paulo_app1_IG","Sydney_app1_IG","Hong-Kong_app1_IG","California_app1_IG"]},"manage_route53_in_terraform":{"value":false},"naming_convention3":{"value":{"California":{"igw_id":"California_igw","nat_id":"California-nat","subnet_id1":"private-us-west-1a","subnet_id2":"private-us-west-1b","subnet_id3":"private-us-west-1c","subnet_id4":"public-us-west-1a","subnet_id5":"public-us-west-1b","subnet_id6":"public-us-west-1c","tags":{"Name":"ForCalifornia","Service":"application1"},"vpc_id":"app1-vpc-G-California"},"HongKong":{"igw_id":"Hong-Kong_igw","nat_id":"Hong-Kong-nat","subnet_id1":"private-ap-east-1a","subnet_id2":"private-ap-east-1b","subnet_id3":"private-ap-east-1c","subnet_id4":"public-ap-east-1a","subnet_id5":"public-ap-east-1b","subnet_id6":"public-ap-east-1c","tags":{"Name":"ForHongKong","Service":"application1"},"vpc_id":"app1-vpc-F-Hong-Kong"},"London":{"igw_id":"London_igw","nat_id":"London-nat","subnet_id1":"private-eu-west-2a","subnet_id2":"private-eu-west-2b","subnet_id3":"private-eu-west-2c","subnet_id4":"public-eu-west-2a","subnet_id5":"public-eu-west-2b","subnet_id6":"public-eu-west-2c","tags":{"Name":"ForLondon","Service":"application1"},"vpc_id":"app1-vpc-C-London"},"NewYork":{"igw_id":"NY_igw","nat_id":"NY-nat","subnet_id1":"private-us-east-1a","subnet_id2":"private-us-east-1b","subnet_id3":"private-us-east-1c","subnet_id4":"public-us-east-1a","subnet_id5":"public-us-east-1b","subnet_id6":"public-us-east-1c","tags":{"Name":"ForNewYork","Service":"application1"},"vpc_id":"app1-vpc-B-NY"},"SaoPaulo":{"igw_id":"Sao-Paulo_igw","nat_id":"Sao-Paulo-nat","subnet_id1":"private-sa-east-1a","subnet_id2":"private-sa-east-1b","subnet_id3":"private-sa-east-1c","subnet_id4":"public-sa-east-1a","subnet_id5":"public-sa-east-1b","subnet_id6":"public-sa-east-1c","tags":{"Name":"ForSaoPaulo","Service":"application1"},"vpc_id":"app1-vpc-D-Sao-Paulo"},"Sydney":{"igw_id":"Sydney_igw","nat_id":"Sydney-nat","subnet_id1":"private-ap-northeast-2a","subnet_id2":"private-ap-northeast-2b","subnet_id3":"private-ap-northeast-2c","subnet_id4":"public-ap-northeast-2a","subnet_id5":"public-ap-northeast-2b","subnet_id6":"public-ap-northeast-2c","tags":{"Name":"ForSydney","Service":"application1"},"vpc_id":"app1-vpc-E-Sydney"},"Tokyo":{"igw_id":"Tokyo_igw","nat_id":"tokyo-nat","subnet_id1":"private-ap-northeast-1a","subnet_id2":"private-ap-northeast-1c","subnet_id3":"private-ap-northeast-1d","subnet_id4":"public-ap-northeast-1a","subnet_id5":"public-ap-northeast-1c","subnet_id6":"public-ap-northeast-1d","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-A-Tokyo"}}},"nat":{"value":["Tokyo_nat","NY_nat","London_nat","Sao-Paulo_nat","Sydney_nat","Hong-Kong_nat","California_nat"]},"ny_cidr_blocks":{"value":[{"availability_zone":"3","cidr_block":"10.248.0.0/16","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"app1-vpc-B-NY","region":"us-east-1"},{"availability_zone":"us-east-1a","cidr_block":"10.248.1.0/24","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"public-us-east-1a","region":"us-east-1"},{"availability_zone":"us-east-1b","cidr_block":"10.248.2.0/24","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"public-us-east-1b","region":"us-east-1"},{"availability_zone":"us-east-1c","cidr_block":"10.248.3.0/24","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"public-us-east-1c","region":"us-east-1"},{"availability_zone":"us-east-1a","cidr_block":"10.248.11.0/24","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"private-us-east-1a","region":"us-east-1"},{"availability_zone":"us-east-1b","cidr_block":"10.248.12.0/24","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"private-us-east-1b","region":"us-east-1"},{"availability_zone":"us-east-1c","cidr_block":"10.248.13.0/24","image_id":"ami-0532be01f26a3de55","instance_type":"t3.micro","name":"private-us-east-1c","region":"us-east-1"}]},"route53_hosted_zone_id":{"value":"Z03960566UZQZIZPHD3F"},"waf_log_destination":{"value":"cloudwatch"},"waf_log_retention_days":{"value":30}},"planned_values":{"outputs":{"acm_cert_arn":{"sensitive":false},"alb_dns_name":{"sensitive":false},"app_fqdn":{"sensitive":false,"type":"string","value":"app.madibamaximus.click"},"compute_zones-virginia":{"sensitive":false,"type":"string","value":"us-east-1a, us-east-1b, us-east-1c, us-east-1d, us-east-1e, us-east-1f"},"content":{"sensitive":false,"type":"string","value":"app1-vpc-B-NY"},"dashboard_name":{"sensitive":false,"type":"string","value":"armageddon-7-0-lab-dashboard01"},"dns_ip_address-1-add-note":{"sensitive":false},"dns_ip_address-1-init":{"sensitive":false},"dns_ip_address-1-list":{"sensitive":false},"dns_website_url-1":{"sensitive":false},"endpoint_private_ec2_instance_id_bonus":{"sensitive":false},"endpoint_vpce_logs_id":{"sensitive":false},"endpoint_vpce_s3_id":{"sensitive":false},"endpoint_vpce_secrets_id":{"sensitive":false},"endpoint_vpce_ssm_id":{"sensitive":false},"ip_address-1":{"sensitive":false},"ip_address-1-add-note":{"sensitive":false},"ip_address-1-init":{"sensitive":false},"ip_address-1-list":{"sensitive":false},"lab1a-rds-mysql-arn":{"sensitive":false},"rds_password":{"sensitive":true},"target_group_arn":{"sensitive":false},"vpc-id":{"sensitive":false},"waf_arn":{"sensitive":false},"website_url-1":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_acm_certificate.domain_acm_cert01","mode":"managed","type":"aws_acm_certificate","name":"domain_acm_cert01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"app.madibamaximus.click","domain_validation_options":[{"domain_name":"app.madibamaximus.click"}],"early_renewal_duration":null,"private_key":null,"region":"us-east-1","subject_alternative_names":["app.madibamaximus.click"],"tags":{"Name":"armageddon-7-0-lab-acm-cert01"},"tags_all":{"Name":"armageddon-7-0-lab-acm-cert01"},"validation_method":"DNS","validation_option":[]},"sensitive_values":{"domain_validation_options":[{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_acm_certificate_validation.dns_acm_validation01_dns_bonus[0]","mode":"managed","type":"aws_acm_certificate_validation","name":"dns_acm_validation01_dns_bonus","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","timeouts":null},"sensitive_values":{"validation_record_fqdns":[]}},{"address":"aws_acm_certificate_validation.domain_acm_validation01","mode":"managed","type":"aws_acm_certificate_validation","name":"domain_acm_validation01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","timeouts":null,"validation_record_fqdns":null},"sensitive_values":{}},{"address":"aws_cloudwatch_dashboard.cloudwatch_dashboard01","mode":"managed","type":"aws_cloudwatch_dashboard","name":"cloudwatch_dashboard01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dashboard_name":"armageddon-7-0-lab-dashboard01","region":"us-east-1"},"sensitive_values":{}},{"address":"aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lab-1b-ec2-to-rds-logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/ec2/armageddon-7-0-lab/ec2-to-rds-logs","region":"us-east-1","retention_in_days":1,"skip_destroy":false,"tags":{"Class":"7.0","Environment":"Armageddon","Owner":"Maximus"},"tags_all":{"Class":"7.0","Environment":"Armageddon","Owner":"Maximus"}},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_cloudwatch_log_group.maximus_waf_log_group01[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"maximus_waf_log_group01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"aws-waf-logs-armageddon-7-0-lab-webacl01","region":"us-east-1","retention_in_days":30,"skip_destroy":false,"tags":{"Name":"armageddon-7-0-lab-waf-log-group01"},"tags_all":{"Name":"armageddon-7-0-lab-waf-log-group01"}},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_cloudwatch_log_metric_filter.db_connection-errors","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"db_connection-errors","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"log_group_name":"/aws/ec2/armageddon-7-0-lab/ec2-to-rds-logs","metric_transformation":[{"default_value":"0","dimensions":null,"name":"DBConnectionErrors","namespace":"Armageddon/Lab1B/RDS","unit":"None","value":"1"}],"name":"armageddon-7-0-lab-db-connection-errors","pattern":"?\"pymysql.err.OperationalError\" ?\"Can't connect\" ?\"ERROR\" ?\"failed\"","region":"us-east-1"},"sensitive_values":{"metric_transformation":[{}]}},{"address":"aws_cloudwatch_metric_alarm.cloudwatch_alb_5xx_alarm01","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"cloudwatch_alb_5xx_alarm01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":null,"alarm_name":"armageddon-7-0-lab-alb-5xx-alarm01","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"HTTPCode_ELB_5XX_Count","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":null,"period":300,"region":"us-east-1","statistic":"Sum","tags":{"Name":"armageddon-7-0-lab-alb-5xx-alarm01"},"tags_all":{"Name":"armageddon-7-0-lab-alb-5xx-alarm01"},"threshold":10,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"alarm_name":null,"region":null}},{"address":"aws_cloudwatch_metric_alarm.db_connection-failure-alarm","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"db_connection-failure-alarm","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":null,"alarm_name":"armageddon-7-0-lab-db-connection-failure","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"dimensions":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"DBConnectionErrors","metric_query":[],"namespace":"Armageddon/Lab1B/RDS","ok_actions":null,"period":300,"region":"us-east-1","statistic":"Sum","tags":{"Class":"7.0","Environment":"Armageddon","Name":"armageddon-7-0-lab-alarm-db-fail","Owner":"Maximus"},"tags_all":{"Class":"7.0","Environment":"Armageddon","Name":"armageddon-7-0-lab-alarm-db-fail","Owner":"Maximus"},"threshold":3,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"sensitive_values":{"alarm_actions":[],"metric_query":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"alarm_name":null,"region":null}},{"address":"aws_db_event_subscription.db_incidents-v2","mode":"managed","type":"aws_db_event_subscription","name":"db_incidents-v2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"enabled":true,"event_categories":["availability","deletion","failover","failure","low storage","maintenance","notification","read replica","recovery","restoration"],"name":"rds-event-sub-v2","region":"us-east-1","source_ids":["lab-mysql"],"source_type":"db-instance","tags":null,"timeouts":null},"sensitive_values":{"event_categories":[false,false,false,false,false,false,false,false,false,false],"source_ids":[false],"tags_all":{}}},{"address":"aws_db_instance.lab-mysql","mode":"managed","type":"aws_db_instance","name":"lab-mysql","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"allocated_storage":5,"allow_major_version_upgrade":true,"apply_immediately":false,"auto_minor_version_upgrade":true,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"labmysql","db_subnet_group_name":"lab-mysql-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.4","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"lab-mysql","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":true,"password_wo":null,"password_wo_version":null,"performance_insights_enabled":false,"publicly_accessible":false,"region":"us-east-1","replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":null,"tags":null,"timeouts":null,"upgrade_storage_config":null,"username":"admin"},"sensitive_values":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_db_subnet_group.RDS-subnet-group","mode":"managed","type":"aws_db_subnet_group","name":"RDS-subnet-group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"lab-mysql-subnet-group","region":"us-east-1","tags":{"Name":"My DB subnet group"},"tags_all":{"Name":"My DB subnet group"}},"sensitive_values":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}},{"address":"aws_eip.NY-eip","mode":"managed","type":"aws_eip","name":"NY-eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","region":"us-east-1","tags":{"Name":"NY-eip"},"tags_all":{"Name":"NY-eip"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_instance_profile.ec2_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"armageddon-7-0-lab-ec2-profile","path":"/","role":"ec2-to-secretsmanager-rolev2","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_policy.policy_leastpriv_cwlogs01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_cwlogs01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Least-privilege CloudWatch Logs write for the app log group","name":"armageddon-7-0-lab-lp-cwlogs01","path":"/","tags":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_iam_policy.policy_leastpriv_read_params01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_read_params01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Least-privilege read for SSM Parameter Store under /armageddon/1b/database/*","name":"armageddon-7-0-lab-lp-ssm-read01","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParametersByPath\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-east-1:314146336018:parameter/armageddon/1b/database/*\"],\"Sid\":\"ReadLabDbParams\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_iam_policy.policy_leastpriv_read_secret01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_read_secret01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Least-privilege read for the lab DB secret","name":"armageddon-7-0-lab-lp-secrets-read01","path":"/","policy":"{\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\",\"secretsmanager:DescribeSecret\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:secretsmanager:us-east-1:314146336018:secret:armageddon-7-0-lab/rds/mysql*\",\"Sid\":\"ReadOnlyLabSecret\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_iam_role.ec2-to-secretsmanager-rolev2","mode":"managed","type":"aws_iam_role","name":"ec2-to-secretsmanager-rolev2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"inline_policy":[{"name":"lab1a_inline_policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:secretsmanager:us-east-1:314146336018:secret:lab1a-rds-mysql*\",\"Sid\":\"ReadSpecificSecret\"}]}"}],"max_session_duration":3600,"name":"ec2-to-secretsmanager-rolev2","path":"/","permissions_boundary":null,"tags":{"tag-key":"ec2-to-secretsmanager-rolev2"},"tags_all":{"tag-key":"ec2-to-secretsmanager-rolev2"}},"sensitive_values":{"inline_policy":[{}],"managed_policy_arns":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role_policy_attachment.AmazonSSMManagedInstanceCore_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonSSMManagedInstanceCore_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.CloudWatchAgentServerPolicy_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"CloudWatchAgentServerPolicy_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy","role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.CloudWatchLogsReadOnlyAccess_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"CloudWatchLogsReadOnlyAccess_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/CloudWatchLogsReadOnlyAccess","role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.SecretsManagerReadWrite_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"SecretsManagerReadWrite_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/SecretsManagerReadWrite","role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_cwlogs01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_cwlogs01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_params01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_params01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_secret01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_secret01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ec2-to-secretsmanager-rolev2"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_instance.ec201_private_bonus","mode":"managed","type":"aws_instance","name":"ec201_private_bonus","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"ami":"ami-0532be01f26a3de55","credit_specification":[],"force_destroy":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"armageddon-7-0-lab-ec2-profile","instance_type":"t3.micro","launch_template":[],"region":"us-east-1","source_dest_check":true,"tags":{"Name":"armageddon-7-0-lab-ec201-private"},"tags_all":{"Name":"armageddon-7-0-lab-ec201-private"},"timeouts":null,"user_data":null,"user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"primary_network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_instance.web_server-ec2-to-rds","mode":"managed","type":"aws_instance","name":"web_server-ec2-to-rds","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"ami":"ami-0532be01f26a3de55","associate_public_ip_address":true,"credit_specification":[],"force_destroy":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"armageddon-7-0-lab-ec2-profile","instance_type":"t3.micro","key_name":"pleaseLord-1-7-26","launch_template":[],"region":"us-east-1","source_dest_check":true,"tags":{"Name":"web_server-ec2-to-rds"},"tags_all":{"Name":"web_server-ec2-to-rds"},"timeouts":null,"user_data":"#!/bin/bash\ndnf update -y\ndnf install -y python3-pip\npip3 install flask pymysql boto3 watchtower\n\nmkdir -p /opt/rdsapp\ncat \u003e/opt/rdsapp/app.py \u003c\u003c'PY'\nimport json\nimport os\nimport time\nimport logging\nimport boto3\nimport pymysql\nfrom flask import Flask, request\nimport watchtower\n\n# === Logging Configuration ===\n# Set up basic logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n# Add CloudWatch Logs handler\n# The handler will automatically create the log stream if permissions allow\ncloudwatch_handler = watchtower.CloudWatchLogHandler(\n    log_group_name=\"/aws/ec2/armageddon-7.0-lab/ec2-to-rds-logs\",\n    stream_name=f\"rdsapp-instance-{int(time.time())}\",  # Unique per process start\n    send_interval=10,                         # Batch send every 10 seconds\n    boto3_client=boto3.client('logs', region_name=os.environ.get(\"AWS_REGION\", \"us-east-1\"))\n)\nlogger.addHandler(cloudwatch_handler)\n\n# Also keep console output for local troubleshooting\nconsole_handler = logging.StreamHandler()\nconsole_handler.setFormatter(logging.Formatter('%(asctime)s - %(levelname)s - %(message)s'))\nlogger.addHandler(console_handler)\n\n# === Application Configuration ===\nREGION = os.environ.get(\"AWS_REGION\", \"us-east-1\")\nSECRET_ID = os.environ.get(\"SECRET_ID\", \"lab1a-rds-mysql-v28\")\n\nsecrets_client = boto3.client(\"secretsmanager\", region_name=REGION)\n\ndef get_db_creds():\n    try:\n        resp = secrets_client.get_secret_value(SecretId=SECRET_ID)\n        creds = json.loads(resp[\"SecretString\"])\n        logger.info(\"Successfully retrieved database credentials from Secrets Manager\")\n        return creds\n    except Exception as e:\n        logger.error(\"Failed to retrieve secret from Secrets Manager: %s\", str(e))\n        raise\n\ndef get_conn():\n    c = get_db_creds()\n    host = c[\"host\"]\n    user = c[\"username\"]\n    password = c[\"password\"]\n    port = int(c.get(\"port\", 3306))\n    db = c.get(\"dbname\", \"labdb\")\n    \n    try:\n        conn = pymysql.connect(\n            host=host, user=user, password=password,\n            port=port, database=db, autocommit=True\n        )\n        logger.info(\"Successfully connected to RDS database\")\n        return conn\n    except Exception as e:\n        logger.error(\"Database connection failed: %s\", str(e))\n        raise\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef home():\n    return \"\"\"\n    \u003ch2\u003eEC2 â†’ RDS Notes App\u003c/h2\u003e\n    \u003cp\u003ePOST /add?note=hello\u003c/p\u003e\n    \u003cp\u003eGET /list\u003c/p\u003e\n    \"\"\"\n\n@app.route(\"/init\")\ndef init_db():\n    try:\n        c = get_db_creds()\n        host = c[\"host\"]\n        user = c[\"username\"]\n        password = c[\"password\"]\n        port = int(c.get(\"port\", 3306))\n\n        conn = pymysql.connect(host=host, user=user, password=password, port=port, autocommit=True)\n        cur = conn.cursor()\n        cur.execute(\"CREATE DATABASE IF NOT EXISTS labdb;\")\n        cur.execute(\"USE labdb;\")\n        cur.execute(\"\"\"\n            CREATE TABLE IF NOT EXISTS notes (\n                id INT AUTO_INCREMENT PRIMARY KEY,\n                note VARCHAR(255) NOT NULL\n            );\n        \"\"\")\n        cur.close()\n        conn.close()\n        logger.info(\"Database initialized successfully\")\n        return \"Initialized labdb + notes table.\"\n    except Exception as e:\n        logger.error(\"Database initialization failed: %s\", str(e))\n        return f\"Error during initialization: {str(e)}\", 500\n\n@app.route(\"/add\", methods=[\"POST\", \"GET\"])\ndef add_note():\n    note = request.args.get(\"note\", \"\").strip()\n    if not note:\n        logger.warning(\"Add request received without note parameter\")\n        return \"Missing note param. Try: /add?note=hello\", 400\n    \n    try:\n        conn = get_conn()\n        cur = conn.cursor()\n        cur.execute(\"INSERT INTO notes(note) VALUES(%s);\", (note,))\n        cur.close()\n        conn.close()\n        logger.info(\"Note added successfully: %s\", note)\n        return f\"Inserted note: {note}\"\n    except Exception as e:\n        logger.error(\"Failed to add note: %s\", str(e))\n        return f\"Error adding note: {str(e)}\", 500\n\n@app.route(\"/list\")\ndef list_notes():\n    try:\n        conn = get_conn()\n        cur = conn.cursor()\n        cur.execute(\"SELECT id, note FROM notes ORDER BY id DESC;\")\n        rows = cur.fetchall()\n        cur.close()\n        conn.close()\n        \n        out = \"\u003ch3\u003eNotes\u003c/h3\u003e\u003cul\u003e\"\n        for r in rows:\n            out += f\"\u003cli\u003e{r[0]}: {r[1]}\u003c/li\u003e\"\n        out += \"\u003c/ul\u003e\"\n        logger.info(\"Successfully retrieved %d notes\", len(rows))\n        return out\n    except Exception as e:\n        logger.error(\"Failed to list notes: %s\", str(e))\n        return f\"Error listing notes: {str(e)}\", 500\n\nif __name__ == \"__main__\":\n    logger.info(\"Starting Flask application on port 80\")\n    app.run(host=\"0.0.0.0\", port=80)\nPY\n\ncat \u003e/etc/systemd/system/rdsapp.service \u003c\u003c'SERVICE'\n[Unit]\nDescription=EC2 to RDS Notes App\nAfter=network.target\n\n[Service]\nWorkingDirectory=/opt/rdsapp\nEnvironment=AWS_REGION=us-east-1\nEnvironment=SECRET_ID=lab1a-rds-mysql-v28\nExecStart=/usr/bin/python3 /opt/rdsapp/app.py\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nSERVICE\n\nsystemctl daemon-reload\nsystemctl enable rdsapp\nsystemctl start rdsapp","user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"primary_network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_internet_gateway.NY_igw","mode":"managed","type":"aws_internet_gateway","name":"NY_igw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","tags":{"Name":"NY_app1_IG","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"NY_app1_IG","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_lb.web_tier_alb01","mode":"managed","type":"aws_lb","name":"web_tier_alb01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"armageddon-7-0-lab-alb-logs-314146336018","enabled":true,"prefix":"armageddon-alb-access-logs"}],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"armageddon-7-0-lab-alb01","preserve_host_header":false,"region":"us-east-1","tags":{"Name":"armageddon-7-0-lab-alb01"},"tags_all":{"Name":"armageddon-7-0-lab-alb01"},"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[{}],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_lb_listener.web_tier_alb_http_listener01","mode":"managed","type":"aws_lb_listener","name":"web_tier_alb_http_listener01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"port":80,"protocol":"HTTP","region":"us-east-1","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_lb_listener.web_tier_alb_https_listener01","mode":"managed","type":"aws_lb_listener","name":"web_tier_alb_https_listener01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","region":"us-east-1","ssl_policy":"ELBSecurityPolicy-TLS13-1-2-2021-06","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_lb_target_group.web_tier_tg01","mode":"managed","type":"aws_lb_target_group","name":"web_tier_tg01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200-399","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"armageddon-7-0-lab-tg01","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"region":"us-east-1","slow_start":0,"tags":{"Name":"armageddon-7-0-lab-tg01"},"tags_all":{"Name":"armageddon-7-0-lab-tg01"},"target_type":"instance"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_lb_target_group_attachment.alb-to-ec2_tg_attach01","mode":"managed","type":"aws_lb_target_group_attachment","name":"alb-to-ec2_tg_attach01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"port":80,"region":"us-east-1"},"sensitive_values":{}},{"address":"aws_nat_gateway.NY-nat","mode":"managed","type":"aws_nat_gateway","name":"NY-nat","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","region":"us-east-1","tags":{"Name":"NY_nat"},"tags_all":{"Name":"NY_nat"},"timeouts":null},"sensitive_values":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"aws_route53_record.dns_acm_validation_records01[\"app.madibamaximus.click\"]","mode":"managed","type":"aws_route53_record","name":"dns_acm_validation_records01","index":"app.madibamaximus.click","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"timeouts":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z03960566UZQZIZPHD3F"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"set_identifier":null,"type":null,"zone_id":null}},{"address":"aws_route53_record.zone_apex_alias01","mode":"managed","type":"aws_route53_record","name":"zone_apex_alias01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":true}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"madibamaximus.click","records":null,"set_identifier":null,"timeouts":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z03960566UZQZIZPHD3F"},"sensitive_values":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"set_identifier":null,"type":null,"zone_id":null}},{"address":"aws_route_table.private-NY","mode":"managed","type":"aws_route_table","name":"private-NY","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private-NY"},"tags_all":{"Name":"private-NY"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_route_table.public-NY","mode":"managed","type":"aws_route_table","name":"public-NY","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"public-NY","service":"NY_VPC_Public_RT"},"tags_all":{"Name":"public-NY","service":"NY_VPC_Public_RT"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_route_table_association.private-us-east-1a","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.private-us-east-1b","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.private-us-east-1c","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public-us-east-1a","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public-us-east-1b","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public-us-east-1c","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_s3_bucket.maximus_alb_logs_bucket01[0]","mode":"managed","type":"aws_s3_bucket","name":"maximus_alb_logs_bucket01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"armageddon-7-0-lab-alb-logs-314146336018","force_destroy":true,"region":"us-east-1","tags":{"Name":"armageddon-7-0-lab-alb-logs-bucket01"},"tags_all":{"Name":"armageddon-7-0-lab-alb-logs-bucket01"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_ownership_controls.maximus_alb_logs_owner01[0]","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"maximus_alb_logs_owner01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","rule":[{"object_ownership":"BucketOwnerPreferred"}]},"sensitive_values":{"rule":[{}]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_policy.maximus_alb_logs_policy01[0]","mode":"managed","type":"aws_s3_bucket_policy","name":"maximus_alb_logs_policy01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_public_access_block.maximus_alb_logs_pab01[0]","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"maximus_alb_logs_pab01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"region":"us-east-1","restrict_public_buckets":true,"skip_destroy":null},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_secretsmanager_secret.lab1a-rds-mysql-v28","mode":"managed","type":"aws_secretsmanager_secret","name":"lab1a-rds-mysql-v28","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_overwrite_replica_secret":false,"kms_key_id":null,"name":"lab1a-rds-mysql-v28","recovery_window_in_days":30,"region":"us-east-1","tags":null},"sensitive_values":{"replica":[],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_secretsmanager_secret_version.lab1a-rds-mysql-version","mode":"managed","type":"aws_secretsmanager_secret_version","name":"lab1a-rds-mysql-version","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]},"identity_schema_version":0,"identity":{"account_id":null,"region":null,"secret_id":null,"version_id":null}},{"address":"aws_security_group.endpoint_vpce_sg01","mode":"managed","type":"aws_security_group","name":"endpoint_vpce_sg01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"SG for VPC Interface Endpoints","name":"armageddon-7-0-lab-vpce-sg01","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"armageddon-7-0-lab-vpce-sg01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-sg01"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_security_group.ping","mode":"managed","type":"aws_security_group","name":"ping","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow icmp for ping","name":"ping","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"icmp-for-ping"},"tags_all":{"Name":"icmp-for-ping"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_security_group.sql_database","mode":"managed","type":"aws_security_group","name":"sql_database","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow access to RDS","name":"allow_port_for_rds","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"allow_access-RDS"},"tags_all":{"Name":"allow_access-RDS"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_security_group.web_load_balancer_alb_sg01","mode":"managed","type":"aws_security_group","name":"web_load_balancer_alb_sg01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"ALB security group","name":"armageddon-7-0-lab-alb-sg01","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"armageddon-7-0-lab-alb-sg01"},"tags_all":{"Name":"armageddon-7-0-lab-alb-sg01"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_security_group.web_tier_ec2_sg01","mode":"managed","type":"aws_security_group","name":"web_tier_ec2_sg01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow inbound HTTP and SSH for web apps in web tier","name":"allow_http_ssh_web_app","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"allow_http_ssh_web_app"},"tags_all":{"Name":"allow_http_ssh_web_app"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_security_group_rule.ec2_ingress_from_alb01","mode":"managed","type":"aws_security_group_rule","name":"ec2_ingress_from_alb01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","region":"us-east-1","self":false,"timeouts":null,"to_port":80,"type":"ingress"},"sensitive_values":{}},{"address":"aws_sns_topic.db_incidents-v2","mode":"managed","type":"aws_sns_topic","name":"db_incidents-v2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"db_incidents-v2","region":"us-east-1","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":null},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_sns_topic_subscription.db_incidents-v2","mode":"managed","type":"aws_sns_topic_subscription","name":"db_incidents-v2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"confirmation_timeout_in_minutes":1,"delivery_policy":null,"endpoint":"king.konvoy1@gmail.com","endpoint_auto_confirms":false,"filter_policy":null,"protocol":"email","raw_message_delivery":false,"redrive_policy":null,"region":"us-east-1","replay_policy":null,"subscription_role_arn":null},"sensitive_values":{},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_ssm_parameter.db-parameters-for-1b[\"endpoint\"]","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","index":"endpoint","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":null,"name":"/armageddon/1b/database/endpoint","overwrite":null,"region":"us-east-1","tags":null,"type":"SecureString","value":"lab-mysql.c23c4ck0msxh.us-east-1.rds.amazonaws.com","value_wo":null,"value_wo_version":null},"sensitive_values":{"tags_all":{},"value":true,"value_wo":true},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_ssm_parameter.db-parameters-for-1b[\"name\"]","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","index":"name","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":null,"name":"/armageddon/1b/database/name","overwrite":null,"region":"us-east-1","tags":null,"type":"SecureString","value":"lab-mysql","value_wo":null,"value_wo_version":null},"sensitive_values":{"tags_all":{},"value":true,"value_wo":true},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_ssm_parameter.db-parameters-for-1b[\"port\"]","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","index":"port","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":null,"description":null,"name":"/armageddon/1b/database/port","overwrite":null,"region":"us-east-1","tags":null,"type":"SecureString","value":"3306","value_wo":null,"value_wo_version":null},"sensitive_values":{"tags_all":{},"value":true,"value_wo":true},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_subnet.private-us-east-1a","mode":"managed","type":"aws_subnet","name":"private-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.248.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"private-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"private-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_subnet.private-us-east-1b","mode":"managed","type":"aws_subnet","name":"private-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.248.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"private-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"private-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_subnet.private-us-east-1c","mode":"managed","type":"aws_subnet","name":"private-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.248.13.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"private-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"private-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_subnet.public-us-east-1a","mode":"managed","type":"aws_subnet","name":"public-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.248.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"public-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"public-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_subnet.public-us-east-1b","mode":"managed","type":"aws_subnet","name":"public-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.248.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"public-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"public-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_subnet.public-us-east-1c","mode":"managed","type":"aws_subnet","name":"public-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.248.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"public-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"public-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc.app1-vpc-b-ny","mode":"managed","type":"aws_vpc","name":"app1-vpc-b-ny","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.248.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"region":"us-east-1","tags":{"Name":"app1-vpc-b-ny","Owner":"Michael","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"app1-vpc-b-ny","Owner":"Michael","Planet":"Maximus","Service":"application1"}},"sensitive_values":{"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_ec2messages01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ec2messages01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ec2messages","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-ec2messages01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-ec2messages01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_kms01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_kms01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.kms","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-kms01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-kms01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_logs01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_logs01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.logs","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-logs01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-logs01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_s3_gw01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_s3_gw01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.s3","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-s3-gw01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-s3-gw01"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_secrets01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_secrets01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.secretsmanager","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-secrets01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-secrets01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_ssm01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ssm01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssm","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-ssm01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-ssm01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_endpoint.endpoint_vpce_ssmmessages01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ssmmessages01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssmmessages","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-ssmmessages01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-ssmmessages01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_security_group_egress_rule.egress_for_ping","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"egress_for_ping","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_egress_rule.sql_database_allow_all_traffic_ipv4","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"sql_database_allow_all_traffic_ipv4","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_egress_rule.web_load_balancer_allow_all_traffic_ipv4","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"web_load_balancer_allow_all_traffic_ipv4","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_egress_rule.web_tier_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"web_tier_egress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.endpoint_vpce_sg01_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"endpoint_vpce_sg01_allow_https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.icmp","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"icmp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":-1,"ip_protocol":"icmp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":-1},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.sql_database_allow_ec2_web_tier_sg","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"sql_database_allow_ec2_web_tier_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":3306,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":3306},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.web_load_balancer_allow_http","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_load_balancer_allow_http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":80,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":80},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.web_load_balancer_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_load_balancer_allow_https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.web_tier_allow_http","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_tier_allow_http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":80,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":80},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.web_tier_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_tier_allow_https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"sensitive_values":{"tags_all":{}}},{"address":"aws_wafv2_web_acl.alb_waf01[0]","mode":"managed","type":"aws_wafv2_web_acl","name":"alb_waf01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":null,"name":"armageddon-7-0-lab-waf01","region":"us-east-1","rule":[{"action":[],"captcha_config":[],"challenge_config":[],"name":"AWSManagedRulesCommonRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesCommonRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"armageddon-7-0-lab-waf-common","sampled_requests_enabled":true}]}],"rule_json":null,"scope":"REGIONAL","tags":{"Name":"armageddon-7-0-lab-waf01"},"tags_all":{"Name":"armageddon-7-0-lab-waf01"},"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"armageddon-7-0-lab-waf01","sampled_requests_enabled":true}]},"sensitive_values":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[],"captcha_config":[],"challenge_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}},{"address":"aws_wafv2_web_acl_association.alb_waf_assoc01[0]","mode":"managed","type":"aws_wafv2_web_acl_association","name":"alb_waf_assoc01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"us-east-1","timeouts":null},"sensitive_values":{}},{"address":"aws_wafv2_web_acl_logging_configuration.maximus_waf_logging01[0]","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"maximus_waf_logging01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"logging_filter":[],"redacted_fields":[],"region":"us-east-1"},"sensitive_values":{"log_destination_configs":[],"logging_filter":[],"redacted_fields":[]}},{"address":"random_password.rds_password","mode":"managed","type":"random_password","name":"rds_password","provider_name":"registry.terraform.io/hashicorp/random","schema_version":3,"values":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":true},"sensitive_values":{"bcrypt_hash":true,"result":true}}]}},"resource_changes":[{"address":"aws_acm_certificate.domain_acm_cert01","mode":"managed","type":"aws_acm_certificate","name":"domain_acm_cert01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"app.madibamaximus.click","domain_validation_options":[{"domain_name":"app.madibamaximus.click"}],"early_renewal_duration":null,"private_key":null,"region":"us-east-1","subject_alternative_names":["app.madibamaximus.click"],"tags":{"Name":"armageddon-7-0-lab-acm-cert01"},"tags_all":{"Name":"armageddon-7-0-lab-acm-cert01"},"validation_method":"DNS","validation_option":[]},"after_unknown":{"arn":true,"domain_validation_options":[{"resource_record_name":true,"resource_record_type":true,"resource_record_value":true}],"id":true,"key_algorithm":true,"not_after":true,"not_before":true,"options":true,"pending_renewal":true,"renewal_eligibility":true,"renewal_summary":true,"status":true,"subject_alternative_names":[false],"tags":{},"tags_all":{},"type":true,"validation_emails":true,"validation_option":[]},"before_sensitive":false,"after_sensitive":{"domain_validation_options":[{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]},"after_identity":{"arn":null}}},{"address":"aws_acm_certificate_validation.dns_acm_validation01_dns_bonus[0]","mode":"managed","type":"aws_acm_certificate_validation","name":"dns_acm_validation01_dns_bonus","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","timeouts":null},"after_unknown":{"certificate_arn":true,"id":true,"validation_record_fqdns":true},"before_sensitive":false,"after_sensitive":{"validation_record_fqdns":[]}}},{"address":"aws_acm_certificate_validation.domain_acm_validation01","mode":"managed","type":"aws_acm_certificate_validation","name":"domain_acm_validation01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","timeouts":null,"validation_record_fqdns":null},"after_unknown":{"certificate_arn":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_cloudwatch_dashboard.cloudwatch_dashboard01","mode":"managed","type":"aws_cloudwatch_dashboard","name":"cloudwatch_dashboard01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"dashboard_name":"armageddon-7-0-lab-dashboard01","region":"us-east-1"},"after_unknown":{"dashboard_arn":true,"dashboard_body":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lab-1b-ec2-to-rds-logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/ec2/armageddon-7-0-lab/ec2-to-rds-logs","region":"us-east-1","retention_in_days":1,"skip_destroy":false,"tags":{"Class":"7.0","Environment":"Armageddon","Owner":"Maximus"},"tags_all":{"Class":"7.0","Environment":"Armageddon","Owner":"Maximus"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_cloudwatch_log_group.maximus_waf_log_group01[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"maximus_waf_log_group01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"aws-waf-logs-armageddon-7-0-lab-webacl01","region":"us-east-1","retention_in_days":30,"skip_destroy":false,"tags":{"Name":"armageddon-7-0-lab-waf-log-group01"},"tags_all":{"Name":"armageddon-7-0-lab-waf-log-group01"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_cloudwatch_log_metric_filter.db_connection-errors","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"db_connection-errors","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"log_group_name":"/aws/ec2/armageddon-7-0-lab/ec2-to-rds-logs","metric_transformation":[{"default_value":"0","dimensions":null,"name":"DBConnectionErrors","namespace":"Armageddon/Lab1B/RDS","unit":"None","value":"1"}],"name":"armageddon-7-0-lab-db-connection-errors","pattern":"?\"pymysql.err.OperationalError\" ?\"Can't connect\" ?\"ERROR\" ?\"failed\"","region":"us-east-1"},"after_unknown":{"apply_on_transformed_logs":true,"id":true,"metric_transformation":[{}]},"before_sensitive":false,"after_sensitive":{"metric_transformation":[{}]}}},{"address":"aws_cloudwatch_metric_alarm.cloudwatch_alb_5xx_alarm01","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"cloudwatch_alb_5xx_alarm01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":null,"alarm_name":"armageddon-7-0-lab-alb-5xx-alarm01","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"HTTPCode_ELB_5XX_Count","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":null,"period":300,"region":"us-east-1","statistic":"Sum","tags":{"Name":"armageddon-7-0-lab-alb-5xx-alarm01"},"tags_all":{"Name":"armageddon-7-0-lab-alb-5xx-alarm01"},"threshold":10,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"alarm_name":null,"region":null}}},{"address":"aws_cloudwatch_metric_alarm.db_connection-failure-alarm","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"db_connection-failure-alarm","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":null,"alarm_name":"armageddon-7-0-lab-db-connection-failure","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"dimensions":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"DBConnectionErrors","metric_query":[],"namespace":"Armageddon/Lab1B/RDS","ok_actions":null,"period":300,"region":"us-east-1","statistic":"Sum","tags":{"Class":"7.0","Environment":"Armageddon","Name":"armageddon-7-0-lab-alarm-db-fail","Owner":"Maximus"},"tags_all":{"Class":"7.0","Environment":"Armageddon","Name":"armageddon-7-0-lab-alarm-db-fail","Owner":"Maximus"},"threshold":3,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"metric_query":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"alarm_name":null,"region":null}}},{"address":"aws_db_event_subscription.db_incidents-v2","mode":"managed","type":"aws_db_event_subscription","name":"db_incidents-v2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"enabled":true,"event_categories":["availability","deletion","failover","failure","low storage","maintenance","notification","read replica","recovery","restoration"],"name":"rds-event-sub-v2","region":"us-east-1","source_ids":["lab-mysql"],"source_type":"db-instance","tags":null,"timeouts":null},"after_unknown":{"arn":true,"customer_aws_id":true,"event_categories":[false,false,false,false,false,false,false,false,false,false],"id":true,"name_prefix":true,"sns_topic":true,"source_ids":[false],"tags_all":true},"before_sensitive":false,"after_sensitive":{"event_categories":[false,false,false,false,false,false,false,false,false,false],"source_ids":[false],"tags_all":{}}}},{"address":"aws_db_instance.lab-mysql","mode":"managed","type":"aws_db_instance","name":"lab-mysql","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":5,"allow_major_version_upgrade":true,"apply_immediately":false,"auto_minor_version_upgrade":true,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"labmysql","db_subnet_group_name":"lab-mysql-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.4","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"lab-mysql","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":true,"password_wo":null,"password_wo_version":null,"performance_insights_enabled":false,"publicly_accessible":false,"region":"us-east-1","replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":null,"tags":null,"timeouts":null,"upgrade_storage_config":null,"username":"admin"},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_retention_period":true,"backup_target":true,"backup_window":true,"blue_green_update":[],"ca_cert_identifier":true,"character_set_name":true,"database_insights_mode":true,"domain_fqdn":true,"endpoint":true,"engine_lifecycle_support":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"iops":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"listener_endpoint":true,"maintenance_window":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"monitoring_role_arn":true,"nchar_character_set_name":true,"network_type":true,"option_group_name":true,"parameter_group_name":true,"password":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"storage_throughput":true,"storage_type":true,"tags_all":true,"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_db_subnet_group.RDS-subnet-group","mode":"managed","type":"aws_db_subnet_group","name":"RDS-subnet-group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"lab-mysql-subnet-group","region":"us-east-1","tags":{"Name":"My DB subnet group"},"tags_all":{"Name":"My DB subnet group"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"supported_network_types":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}},{"address":"aws_eip.NY-eip","mode":"managed","type":"aws_eip","name":"NY-eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","region":"us-east-1","tags":{"Name":"NY-eip"},"tags_all":{"Name":"NY-eip"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_instance_profile.ec2_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_profile","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"armageddon-7-0-lab-ec2-profile","path":"/","role":"ec2-to-secretsmanager-rolev2","tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_policy.policy_leastpriv_cwlogs01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_cwlogs01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Least-privilege CloudWatch Logs write for the app log group","name":"armageddon-7-0-lab-lp-cwlogs01","path":"/","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_iam_policy.policy_leastpriv_read_params01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_read_params01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Least-privilege read for SSM Parameter Store under /armageddon/1b/database/*","name":"armageddon-7-0-lab-lp-ssm-read01","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParametersByPath\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-east-1:314146336018:parameter/armageddon/1b/database/*\"],\"Sid\":\"ReadLabDbParams\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_iam_policy.policy_leastpriv_read_secret01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_read_secret01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Least-privilege read for the lab DB secret","name":"armageddon-7-0-lab-lp-secrets-read01","path":"/","policy":"{\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\",\"secretsmanager:DescribeSecret\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:secretsmanager:us-east-1:314146336018:secret:armageddon-7-0-lab/rds/mysql*\",\"Sid\":\"ReadOnlyLabSecret\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_iam_role.ec2-to-secretsmanager-rolev2","mode":"managed","type":"aws_iam_role","name":"ec2-to-secretsmanager-rolev2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"inline_policy":[{"name":"lab1a_inline_policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:secretsmanager:us-east-1:314146336018:secret:lab1a-rds-mysql*\",\"Sid\":\"ReadSpecificSecret\"}]}"}],"max_session_duration":3600,"name":"ec2-to-secretsmanager-rolev2","path":"/","permissions_boundary":null,"tags":{"tag-key":"ec2-to-secretsmanager-rolev2"},"tags_all":{"tag-key":"ec2-to-secretsmanager-rolev2"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[{}],"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[{}],"managed_policy_arns":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role_policy_attachment.AmazonSSMManagedInstanceCore_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonSSMManagedInstanceCore_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.CloudWatchAgentServerPolicy_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"CloudWatchAgentServerPolicy_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy","role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.CloudWatchLogsReadOnlyAccess_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"CloudWatchLogsReadOnlyAccess_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/CloudWatchLogsReadOnlyAccess","role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.SecretsManagerReadWrite_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"SecretsManagerReadWrite_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/SecretsManagerReadWrite","role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_cwlogs01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_cwlogs01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_params01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_params01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_secret01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_secret01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ec2-to-secretsmanager-rolev2"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_instance.ec201_private_bonus","mode":"managed","type":"aws_instance","name":"ec201_private_bonus","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0532be01f26a3de55","credit_specification":[],"force_destroy":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"armageddon-7-0-lab-ec2-profile","instance_type":"t3.micro","launch_template":[],"region":"us-east-1","source_dest_check":true,"tags":{"Name":"armageddon-7-0-lab-ec201-private"},"tags_all":{"Name":"armageddon-7-0-lab-ec201-private"},"timeouts":null,"user_data":null,"user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_options":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enable_primary_ipv6":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":true,"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_group_id":true,"placement_partition_number":true,"primary_network_interface":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"primary_network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_instance.web_server-ec2-to-rds","mode":"managed","type":"aws_instance","name":"web_server-ec2-to-rds","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0532be01f26a3de55","associate_public_ip_address":true,"credit_specification":[],"force_destroy":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"armageddon-7-0-lab-ec2-profile","instance_type":"t3.micro","key_name":"pleaseLord-1-7-26","launch_template":[],"region":"us-east-1","source_dest_check":true,"tags":{"Name":"web_server-ec2-to-rds"},"tags_all":{"Name":"web_server-ec2-to-rds"},"timeouts":null,"user_data":"#!/bin/bash\ndnf update -y\ndnf install -y python3-pip\npip3 install flask pymysql boto3 watchtower\n\nmkdir -p /opt/rdsapp\ncat \u003e/opt/rdsapp/app.py \u003c\u003c'PY'\nimport json\nimport os\nimport time\nimport logging\nimport boto3\nimport pymysql\nfrom flask import Flask, request\nimport watchtower\n\n# === Logging Configuration ===\n# Set up basic logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\n# Add CloudWatch Logs handler\n# The handler will automatically create the log stream if permissions allow\ncloudwatch_handler = watchtower.CloudWatchLogHandler(\n    log_group_name=\"/aws/ec2/armageddon-7.0-lab/ec2-to-rds-logs\",\n    stream_name=f\"rdsapp-instance-{int(time.time())}\",  # Unique per process start\n    send_interval=10,                         # Batch send every 10 seconds\n    boto3_client=boto3.client('logs', region_name=os.environ.get(\"AWS_REGION\", \"us-east-1\"))\n)\nlogger.addHandler(cloudwatch_handler)\n\n# Also keep console output for local troubleshooting\nconsole_handler = logging.StreamHandler()\nconsole_handler.setFormatter(logging.Formatter('%(asctime)s - %(levelname)s - %(message)s'))\nlogger.addHandler(console_handler)\n\n# === Application Configuration ===\nREGION = os.environ.get(\"AWS_REGION\", \"us-east-1\")\nSECRET_ID = os.environ.get(\"SECRET_ID\", \"lab1a-rds-mysql-v28\")\n\nsecrets_client = boto3.client(\"secretsmanager\", region_name=REGION)\n\ndef get_db_creds():\n    try:\n        resp = secrets_client.get_secret_value(SecretId=SECRET_ID)\n        creds = json.loads(resp[\"SecretString\"])\n        logger.info(\"Successfully retrieved database credentials from Secrets Manager\")\n        return creds\n    except Exception as e:\n        logger.error(\"Failed to retrieve secret from Secrets Manager: %s\", str(e))\n        raise\n\ndef get_conn():\n    c = get_db_creds()\n    host = c[\"host\"]\n    user = c[\"username\"]\n    password = c[\"password\"]\n    port = int(c.get(\"port\", 3306))\n    db = c.get(\"dbname\", \"labdb\")\n    \n    try:\n        conn = pymysql.connect(\n            host=host, user=user, password=password,\n            port=port, database=db, autocommit=True\n        )\n        logger.info(\"Successfully connected to RDS database\")\n        return conn\n    except Exception as e:\n        logger.error(\"Database connection failed: %s\", str(e))\n        raise\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef home():\n    return \"\"\"\n    \u003ch2\u003eEC2 â†’ RDS Notes App\u003c/h2\u003e\n    \u003cp\u003ePOST /add?note=hello\u003c/p\u003e\n    \u003cp\u003eGET /list\u003c/p\u003e\n    \"\"\"\n\n@app.route(\"/init\")\ndef init_db():\n    try:\n        c = get_db_creds()\n        host = c[\"host\"]\n        user = c[\"username\"]\n        password = c[\"password\"]\n        port = int(c.get(\"port\", 3306))\n\n        conn = pymysql.connect(host=host, user=user, password=password, port=port, autocommit=True)\n        cur = conn.cursor()\n        cur.execute(\"CREATE DATABASE IF NOT EXISTS labdb;\")\n        cur.execute(\"USE labdb;\")\n        cur.execute(\"\"\"\n            CREATE TABLE IF NOT EXISTS notes (\n                id INT AUTO_INCREMENT PRIMARY KEY,\n                note VARCHAR(255) NOT NULL\n            );\n        \"\"\")\n        cur.close()\n        conn.close()\n        logger.info(\"Database initialized successfully\")\n        return \"Initialized labdb + notes table.\"\n    except Exception as e:\n        logger.error(\"Database initialization failed: %s\", str(e))\n        return f\"Error during initialization: {str(e)}\", 500\n\n@app.route(\"/add\", methods=[\"POST\", \"GET\"])\ndef add_note():\n    note = request.args.get(\"note\", \"\").strip()\n    if not note:\n        logger.warning(\"Add request received without note parameter\")\n        return \"Missing note param. Try: /add?note=hello\", 400\n    \n    try:\n        conn = get_conn()\n        cur = conn.cursor()\n        cur.execute(\"INSERT INTO notes(note) VALUES(%s);\", (note,))\n        cur.close()\n        conn.close()\n        logger.info(\"Note added successfully: %s\", note)\n        return f\"Inserted note: {note}\"\n    except Exception as e:\n        logger.error(\"Failed to add note: %s\", str(e))\n        return f\"Error adding note: {str(e)}\", 500\n\n@app.route(\"/list\")\ndef list_notes():\n    try:\n        conn = get_conn()\n        cur = conn.cursor()\n        cur.execute(\"SELECT id, note FROM notes ORDER BY id DESC;\")\n        rows = cur.fetchall()\n        cur.close()\n        conn.close()\n        \n        out = \"\u003ch3\u003eNotes\u003c/h3\u003e\u003cul\u003e\"\n        for r in rows:\n            out += f\"\u003cli\u003e{r[0]}: {r[1]}\u003c/li\u003e\"\n        out += \"\u003c/ul\u003e\"\n        logger.info(\"Successfully retrieved %d notes\", len(rows))\n        return out\n    except Exception as e:\n        logger.error(\"Failed to list notes: %s\", str(e))\n        return f\"Error listing notes: {str(e)}\", 500\n\nif __name__ == \"__main__\":\n    logger.info(\"Starting Flask application on port 80\")\n    app.run(host=\"0.0.0.0\", port=80)\nPY\n\ncat \u003e/etc/systemd/system/rdsapp.service \u003c\u003c'SERVICE'\n[Unit]\nDescription=EC2 to RDS Notes App\nAfter=network.target\n\n[Service]\nWorkingDirectory=/opt/rdsapp\nEnvironment=AWS_REGION=us-east-1\nEnvironment=SECRET_ID=lab1a-rds-mysql-v28\nExecStart=/usr/bin/python3 /opt/rdsapp/app.py\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nSERVICE\n\nsystemctl daemon-reload\nsystemctl enable rdsapp\nsystemctl start rdsapp","user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_options":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enable_primary_ipv6":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"launch_template":[],"maintenance_options":true,"metadata_options":true,"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_group_id":true,"placement_partition_number":true,"primary_network_interface":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[],"network_interface":[],"primary_network_interface":[],"private_dns_name_options":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_internet_gateway.NY_igw","mode":"managed","type":"aws_internet_gateway","name":"NY_igw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","tags":{"Name":"NY_app1_IG","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"NY_app1_IG","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_lb.web_tier_alb01","mode":"managed","type":"aws_lb","name":"web_tier_alb01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[{"bucket":"armageddon-7-0-lab-alb-logs-314146336018","enabled":true,"prefix":"armageddon-alb-access-logs"}],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"armageddon-7-0-lab-alb01","preserve_host_header":false,"region":"us-east-1","tags":{"Name":"armageddon-7-0-lab-alb01"},"tags_all":{"Name":"armageddon-7-0-lab-alb01"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[{}],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"ipam_pools":[],"minimum_load_balancer_capacity":[],"name_prefix":true,"secondary_ips_auto_assigned_per_subnet":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[{}],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_lb_listener.web_tier_alb_http_listener01","mode":"managed","type":"aws_lb_listener","name":"web_tier_alb_http_listener01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"port":80,"protocol":"HTTP","region":"us-east-1","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[{}]}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"ssl_policy":true,"tags_all":true,"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_lb_listener.web_tier_alb_https_listener01","mode":"managed","type":"aws_lb_listener","name":"web_tier_alb_https_listener01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","region":"us-east-1","ssl_policy":"ELBSecurityPolicy-TLS13-1-2-2021-06","tags":null,"timeouts":null},"after_unknown":{"arn":true,"certificate_arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"tags_all":true,"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_lb_target_group.web_tier_tg01","mode":"managed","type":"aws_lb_target_group","name":"web_tier_tg01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200-399","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"armageddon-7-0-lab-tg01","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"region":"us-east-1","slow_start":0,"tags":{"Name":"armageddon-7-0-lab-tg01"},"tags_all":{"Name":"armageddon-7-0-lab-tg01"},"target_type":"instance"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]},"after_identity":{"arn":null}}},{"address":"aws_lb_target_group_attachment.alb-to-ec2_tg_attach01","mode":"managed","type":"aws_lb_target_group_attachment","name":"alb-to-ec2_tg_attach01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":80,"region":"us-east-1"},"after_unknown":{"id":true,"target_group_arn":true,"target_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_nat_gateway.NY-nat","mode":"managed","type":"aws_nat_gateway","name":"NY-nat","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","region":"us-east-1","tags":{"Name":"NY_nat"},"tags_all":{"Name":"NY_nat"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_allocation_ids":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"aws_route53_record.dns_acm_validation_records01[\"app.madibamaximus.click\"]","mode":"managed","type":"aws_route53_record","name":"dns_acm_validation_records01","index":"app.madibamaximus.click","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"timeouts":null,"ttl":60,"weighted_routing_policy":[],"zone_id":"Z03960566UZQZIZPHD3F"},"after_unknown":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"name":true,"records":true,"type":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]},"after_identity":{"account_id":null,"name":null,"set_identifier":null,"type":null,"zone_id":null}}},{"address":"aws_route53_record.zone_apex_alias01","mode":"managed","type":"aws_route53_record","name":"zone_apex_alias01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[{"evaluate_target_health":true}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"madibamaximus.click","records":null,"set_identifier":null,"timeouts":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z03960566UZQZIZPHD3F"},"after_unknown":{"alias":[{"name":true,"zone_id":true}],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]},"after_identity":{"account_id":null,"name":null,"set_identifier":null,"type":null,"zone_id":null}}},{"address":"aws_route_table.private-NY","mode":"managed","type":"aws_route_table","name":"private-NY","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"private-NY"},"tags_all":{"Name":"private-NY"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_route_table.public-NY","mode":"managed","type":"aws_route_table","name":"public-NY","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"public-NY","service":"NY_VPC_Public_RT"},"tags_all":{"Name":"public-NY","service":"NY_VPC_Public_RT"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_route_table_association.private-us-east-1a","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.private-us-east-1b","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.private-us-east-1c","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public-us-east-1a","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public-us-east-1b","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public-us-east-1c","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket.maximus_alb_logs_bucket01[0]","mode":"managed","type":"aws_s3_bucket","name":"maximus_alb_logs_bucket01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"armageddon-7-0-lab-alb-logs-314146336018","force_destroy":true,"region":"us-east-1","tags":{"Name":"armageddon-7-0-lab-alb-logs-bucket01"},"tags_all":{"Name":"armageddon-7-0-lab-alb-logs-bucket01"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_region":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_ownership_controls.maximus_alb_logs_owner01[0]","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"maximus_alb_logs_owner01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","rule":[{"object_ownership":"BucketOwnerPreferred"}]},"after_unknown":{"bucket":true,"id":true,"rule":[{}]},"before_sensitive":false,"after_sensitive":{"rule":[{}]},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_policy.maximus_alb_logs_policy01[0]","mode":"managed","type":"aws_s3_bucket_policy","name":"maximus_alb_logs_policy01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1"},"after_unknown":{"bucket":true,"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_public_access_block.maximus_alb_logs_pab01[0]","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"maximus_alb_logs_pab01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"region":"us-east-1","restrict_public_buckets":true,"skip_destroy":null},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_secretsmanager_secret.lab1a-rds-mysql-v28","mode":"managed","type":"aws_secretsmanager_secret","name":"lab1a-rds-mysql-v28","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_overwrite_replica_secret":false,"kms_key_id":null,"name":"lab1a-rds-mysql-v28","recovery_window_in_days":30,"region":"us-east-1","tags":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"replica":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"replica":[],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_secretsmanager_secret_version.lab1a-rds-mysql-version","mode":"managed","type":"aws_secretsmanager_secret_version","name":"lab1a-rds-mysql-version","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]},"after_identity":{"account_id":null,"region":null,"secret_id":null,"version_id":null}}},{"address":"aws_security_group.endpoint_vpce_sg01","mode":"managed","type":"aws_security_group","name":"endpoint_vpce_sg01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"SG for VPC Interface Endpoints","name":"armageddon-7-0-lab-vpce-sg01","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"armageddon-7-0-lab-vpce-sg01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-sg01"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_security_group.ping","mode":"managed","type":"aws_security_group","name":"ping","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow icmp for ping","name":"ping","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"icmp-for-ping"},"tags_all":{"Name":"icmp-for-ping"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_security_group.sql_database","mode":"managed","type":"aws_security_group","name":"sql_database","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow access to RDS","name":"allow_port_for_rds","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"allow_access-RDS"},"tags_all":{"Name":"allow_access-RDS"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_security_group.web_load_balancer_alb_sg01","mode":"managed","type":"aws_security_group","name":"web_load_balancer_alb_sg01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"ALB security group","name":"armageddon-7-0-lab-alb-sg01","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"armageddon-7-0-lab-alb-sg01"},"tags_all":{"Name":"armageddon-7-0-lab-alb-sg01"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_security_group.web_tier_ec2_sg01","mode":"managed","type":"aws_security_group","name":"web_tier_ec2_sg01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow inbound HTTP and SSH for web apps in web tier","name":"allow_http_ssh_web_app","region":"us-east-1","revoke_rules_on_delete":false,"tags":{"Name":"allow_http_ssh_web_app"},"tags_all":{"Name":"allow_http_ssh_web_app"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_security_group_rule.ec2_ingress_from_alb01","mode":"managed","type":"aws_security_group_rule","name":"ec2_ingress_from_alb01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","region":"us-east-1","self":false,"timeouts":null,"to_port":80,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_sns_topic.db_incidents-v2","mode":"managed","type":"aws_sns_topic","name":"db_incidents-v2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"db_incidents-v2","region":"us-east-1","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":null},"after_unknown":{"arn":true,"beginning_archive_time":true,"fifo_throughput_scope":true,"id":true,"name_prefix":true,"owner":true,"policy":true,"signature_version":true,"tags_all":true,"tracing_config":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_sns_topic_subscription.db_incidents-v2","mode":"managed","type":"aws_sns_topic_subscription","name":"db_incidents-v2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"confirmation_timeout_in_minutes":1,"delivery_policy":null,"endpoint":"king.konvoy1@gmail.com","endpoint_auto_confirms":false,"filter_policy":null,"protocol":"email","raw_message_delivery":false,"redrive_policy":null,"region":"us-east-1","replay_policy":null,"subscription_role_arn":null},"after_unknown":{"arn":true,"confirmation_was_authenticated":true,"filter_policy_scope":true,"id":true,"owner_id":true,"pending_confirmation":true,"topic_arn":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"arn":null}}},{"address":"aws_ssm_parameter.db-parameters-for-1b[\"endpoint\"]","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","index":"endpoint","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":null,"name":"/armageddon/1b/database/endpoint","overwrite":null,"region":"us-east-1","tags":null,"type":"SecureString","value":"lab-mysql.c23c4ck0msxh.us-east-1.rds.amazonaws.com","value_wo":null,"value_wo_version":null},"after_unknown":{"arn":true,"data_type":true,"has_value_wo":true,"id":true,"insecure_value":true,"key_id":true,"tags_all":true,"tier":true,"version":true},"before_sensitive":false,"after_sensitive":{"tags_all":{},"value":true,"value_wo":true},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_ssm_parameter.db-parameters-for-1b[\"name\"]","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","index":"name","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":null,"name":"/armageddon/1b/database/name","overwrite":null,"region":"us-east-1","tags":null,"type":"SecureString","value":"lab-mysql","value_wo":null,"value_wo_version":null},"after_unknown":{"arn":true,"data_type":true,"has_value_wo":true,"id":true,"insecure_value":true,"key_id":true,"tags_all":true,"tier":true,"version":true},"before_sensitive":false,"after_sensitive":{"tags_all":{},"value":true,"value_wo":true},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_ssm_parameter.db-parameters-for-1b[\"port\"]","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","index":"port","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_pattern":null,"description":null,"name":"/armageddon/1b/database/port","overwrite":null,"region":"us-east-1","tags":null,"type":"SecureString","value":"3306","value_wo":null,"value_wo_version":null},"after_unknown":{"arn":true,"data_type":true,"has_value_wo":true,"id":true,"insecure_value":true,"key_id":true,"tags_all":true,"tier":true,"version":true},"before_sensitive":false,"after_sensitive":{"tags_all":{},"value":true,"value_wo":true},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_subnet.private-us-east-1a","mode":"managed","type":"aws_subnet","name":"private-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.248.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"private-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"private-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_subnet.private-us-east-1b","mode":"managed","type":"aws_subnet","name":"private-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.248.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"private-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"private-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_subnet.private-us-east-1c","mode":"managed","type":"aws_subnet","name":"private-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.248.13.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"private-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"private-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_subnet.public-us-east-1a","mode":"managed","type":"aws_subnet","name":"public-us-east-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.248.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"public-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"public-us-east-1a","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_subnet.public-us-east-1b","mode":"managed","type":"aws_subnet","name":"public-us-east-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.248.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"public-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"public-us-east-1b","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_subnet.public-us-east-1c","mode":"managed","type":"aws_subnet","name":"public-us-east-1c","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.248.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"region":"us-east-1","tags":{"Name":"public-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"public-us-east-1c","Owner":"Mighty","Planet":"Maximus","Service":"application1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc.app1-vpc-b-ny","mode":"managed","type":"aws_vpc","name":"app1-vpc-b-ny","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.248.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"region":"us-east-1","tags":{"Name":"app1-vpc-b-ny","Owner":"Michael","Planet":"Maximus","Service":"application1"},"tags_all":{"Name":"app1-vpc-b-ny","Owner":"Michael","Planet":"Maximus","Service":"application1"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_ec2messages01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ec2messages01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ec2messages","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-ec2messages01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-ec2messages01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_kms01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_kms01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.kms","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-kms01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-kms01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_logs01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_logs01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.logs","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-logs01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-logs01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_s3_gw01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_s3_gw01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.s3","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-s3-gw01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-s3-gw01"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"private_dns_enabled":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_secrets01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_secrets01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.secretsmanager","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-secrets01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-secrets01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_ssm01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ssm01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssm","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-ssm01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-ssm01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_endpoint.endpoint_vpce_ssmmessages01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ssmmessages01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"region":"us-east-1","resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssmmessages","service_network_arn":null,"tags":{"Name":"armageddon-7-0-lab-vpce-ssmmessages01"},"tags_all":{"Name":"armageddon-7-0-lab-vpce-ssmmessages01"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_security_group_egress_rule.egress_for_ping","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"egress_for_ping","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_egress_rule.sql_database_allow_all_traffic_ipv4","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"sql_database_allow_all_traffic_ipv4","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_egress_rule.web_load_balancer_allow_all_traffic_ipv4","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"web_load_balancer_allow_all_traffic_ipv4","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_egress_rule.web_tier_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"web_tier_egress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.endpoint_vpce_sg01_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"endpoint_vpce_sg01_allow_https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"after_unknown":{"arn":true,"id":true,"referenced_security_group_id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.icmp","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"icmp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":-1,"ip_protocol":"icmp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":-1},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.sql_database_allow_ec2_web_tier_sg","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"sql_database_allow_ec2_web_tier_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":3306,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":3306},"after_unknown":{"arn":true,"id":true,"referenced_security_group_id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.web_load_balancer_allow_http","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_load_balancer_allow_http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":80,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":80},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.web_load_balancer_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_load_balancer_allow_https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.web_tier_allow_http","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_tier_allow_http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":80,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":80},"after_unknown":{"arn":true,"id":true,"referenced_security_group_id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.web_tier_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_tier_allow_https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":null,"cidr_ipv6":null,"description":null,"from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"after_unknown":{"arn":true,"id":true,"referenced_security_group_id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_wafv2_web_acl.alb_waf01[0]","mode":"managed","type":"aws_wafv2_web_acl","name":"alb_waf01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":null,"name":"armageddon-7-0-lab-waf01","region":"us-east-1","rule":[{"action":[],"captcha_config":[],"challenge_config":[],"name":"AWSManagedRulesCommonRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesCommonRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"armageddon-7-0-lab-waf-common","sampled_requests_enabled":true}]}],"rule_json":null,"scope":"REGIONAL","tags":{"Name":"armageddon-7-0-lab-waf01"},"tags_all":{"Name":"armageddon-7-0-lab-waf01"},"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"armageddon-7-0-lab-waf01","sampled_requests_enabled":true}]},"after_unknown":{"application_integration_url":true,"arn":true,"association_config":[],"capacity":true,"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"id":true,"lock_token":true,"name_prefix":true,"rule":[{"action":[],"captcha_config":[],"challenge_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]},"before_sensitive":false,"after_sensitive":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[],"captcha_config":[],"challenge_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}}},{"address":"aws_wafv2_web_acl_association.alb_waf_assoc01[0]","mode":"managed","type":"aws_wafv2_web_acl_association","name":"alb_waf_assoc01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","timeouts":null},"after_unknown":{"id":true,"resource_arn":true,"web_acl_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_wafv2_web_acl_logging_configuration.maximus_waf_logging01[0]","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"maximus_waf_logging01","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"logging_filter":[],"redacted_fields":[],"region":"us-east-1"},"after_unknown":{"id":true,"log_destination_configs":true,"logging_filter":[],"redacted_fields":[],"resource_arn":true},"before_sensitive":false,"after_sensitive":{"log_destination_configs":[],"logging_filter":[],"redacted_fields":[]}}},{"address":"random_password.rds_password","mode":"managed","type":"random_password","name":"rds_password","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":true},"after_unknown":{"bcrypt_hash":true,"id":true,"result":true},"before_sensitive":false,"after_sensitive":{"bcrypt_hash":true,"result":true}}}],"output_changes":{"acm_cert_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"alb_dns_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"app_fqdn":{"actions":["create"],"before":null,"after":"app.madibamaximus.click","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"compute_zones-virginia":{"actions":["create"],"before":null,"after":"us-east-1a, us-east-1b, us-east-1c, us-east-1d, us-east-1e, us-east-1f","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"content":{"actions":["create"],"before":null,"after":"app1-vpc-B-NY","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"dashboard_name":{"actions":["create"],"before":null,"after":"armageddon-7-0-lab-dashboard01","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"dns_ip_address-1-add-note":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"dns_ip_address-1-init":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"dns_ip_address-1-list":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"dns_website_url-1":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"endpoint_private_ec2_instance_id_bonus":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"endpoint_vpce_logs_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"endpoint_vpce_s3_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"endpoint_vpce_secrets_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"endpoint_vpce_ssm_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ip_address-1":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ip_address-1-add-note":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ip_address-1-init":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ip_address-1-list":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"lab1a-rds-mysql-arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"rds_password":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":true,"after_sensitive":true},"target_group_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vpc-id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"waf_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"website_url-1":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.14.3","values":{"outputs":{"app_fqdn":{"sensitive":false,"value":"app.madibamaximus.click","type":"string"},"compute_zones-virginia":{"sensitive":false,"value":"us-east-1a, us-east-1b, us-east-1c, us-east-1d, us-east-1e, us-east-1f","type":"string"},"content":{"sensitive":false,"value":"app1-vpc-B-NY","type":"string"},"dashboard_name":{"sensitive":false,"value":"armageddon-7-0-lab-dashboard01","type":"string"}},"root_module":{"resources":[{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1-zg-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"region":"us-east-1","state":"available","timeouts":null,"zone_ids":["use1-az6","use1-az1","use1-az2","use1-az4","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"data.aws_caller_identity.current_self01","mode":"data","type":"aws_caller_identity","name":"current_self01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"314146336018","arn":"arn:aws:iam::314146336018:user/AWSCLI","id":"314146336018","user_id":"AIDAUSJEUVUJGDRRBSTY4"},"sensitive_values":{}},{"address":"data.aws_elb_service_account.main","mode":"data","type":"aws_elb_service_account","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::127311923021:root","id":"127311923021","region":"us-east-1"},"sensitive_values":{}},{"address":"data.aws_region.current_region01","mode":"data","type":"aws_region","name":"current_region01","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1","region":"us-east-1"},"sensitive_values":{}},{"address":"data.aws_ssm_parameter.al2023","mode":"data","type":"aws_ssm_parameter","name":"al2023","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ssm:us-east-1::parameter/aws/service/ami-amazon-linux-latest/al2023-ami-kernel-default-x86_64","id":"/aws/service/ami-amazon-linux-latest/al2023-ami-kernel-default-x86_64","insecure_value":"ami-0532be01f26a3de55","name":"/aws/service/ami-amazon-linux-latest/al2023-ami-kernel-default-x86_64","region":"us-east-1","type":"String","value":"ami-0532be01f26a3de55","version":145,"with_decryption":true},"sensitive_values":{"value":true}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"6.18.0","expressions":{"region":{"constant_value":"us-east-1"}}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random"}},"root_module":{"outputs":{"acm_cert_arn":{"expression":{"references":["aws_acm_certificate.domain_acm_cert01.arn","aws_acm_certificate.domain_acm_cert01"]}},"alb_dns_name":{"expression":{"references":["aws_lb.web_tier_alb01.dns_name","aws_lb.web_tier_alb01"]}},"app_fqdn":{"expression":{"references":["var.app_subdomain","var.domain_name"]}},"compute_zones-virginia":{"expression":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available"]},"description":"Comma-separated compute zones"},"content":{"expression":{"references":["var.naming_convention3.NewYork.vpc_id","var.naming_convention3.NewYork","var.naming_convention3"]}},"dashboard_name":{"expression":{"references":["aws_cloudwatch_dashboard.cloudwatch_dashboard01.dashboard_name","aws_cloudwatch_dashboard.cloudwatch_dashboard01"]}},"dns_ip_address-1-add-note":{"expression":{"references":["aws_lb.web_tier_alb01.dns_name","aws_lb.web_tier_alb01"]}},"dns_ip_address-1-init":{"expression":{"references":["aws_lb.web_tier_alb01.dns_name","aws_lb.web_tier_alb01"]}},"dns_ip_address-1-list":{"expression":{"references":["aws_lb.web_tier_alb01.dns_name","aws_lb.web_tier_alb01"]}},"dns_website_url-1":{"expression":{"references":["aws_lb.web_tier_alb01.dns_name","aws_lb.web_tier_alb01"]}},"endpoint_private_ec2_instance_id_bonus":{"expression":{"references":["aws_instance.ec201_private_bonus.id","aws_instance.ec201_private_bonus"]}},"endpoint_vpce_logs_id":{"expression":{"references":["aws_vpc_endpoint.endpoint_vpce_logs01.id","aws_vpc_endpoint.endpoint_vpce_logs01"]}},"endpoint_vpce_s3_id":{"expression":{"references":["aws_vpc_endpoint.endpoint_vpce_s3_gw01.id","aws_vpc_endpoint.endpoint_vpce_s3_gw01"]}},"endpoint_vpce_secrets_id":{"expression":{"references":["aws_vpc_endpoint.endpoint_vpce_secrets01.id","aws_vpc_endpoint.endpoint_vpce_secrets01"]}},"endpoint_vpce_ssm_id":{"expression":{"references":["aws_vpc_endpoint.endpoint_vpce_ssm01.id","aws_vpc_endpoint.endpoint_vpce_ssm01"]}},"ip_address-1":{"expression":{"references":["aws_instance.web_server-ec2-to-rds.public_ip","aws_instance.web_server-ec2-to-rds"]}},"ip_address-1-add-note":{"expression":{"references":["aws_instance.web_server-ec2-to-rds.public_ip","aws_instance.web_server-ec2-to-rds"]}},"ip_address-1-init":{"expression":{"references":["aws_instance.web_server-ec2-to-rds.public_ip","aws_instance.web_server-ec2-to-rds"]}},"ip_address-1-list":{"expression":{"references":["aws_instance.web_server-ec2-to-rds.public_ip","aws_instance.web_server-ec2-to-rds"]}},"lab1a-rds-mysql-arn":{"expression":{"references":["aws_secretsmanager_secret.lab1a-rds-mysql-v28.arn","aws_secretsmanager_secret.lab1a-rds-mysql-v28"]}},"rds_password":{"sensitive":true,"expression":{"references":["random_password.rds_password.result","random_password.rds_password"]}},"target_group_arn":{"expression":{"references":["aws_lb_target_group.web_tier_tg01.arn","aws_lb_target_group.web_tier_tg01"]}},"vpc-id":{"expression":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"waf_arn":{"expression":{"references":["var.enable_waf","aws_wafv2_web_acl.alb_waf01[0].arn","aws_wafv2_web_acl.alb_waf01[0]","aws_wafv2_web_acl.alb_waf01"]}},"website_url-1":{"expression":{"references":["aws_instance.web_server-ec2-to-rds.public_dns","aws_instance.web_server-ec2-to-rds"]}}},"resources":[{"address":"aws_acm_certificate.domain_acm_cert01","mode":"managed","type":"aws_acm_certificate","name":"domain_acm_cert01","provider_config_key":"aws","expressions":{"domain_name":{"references":["local.domain_fqdn"]},"tags":{"references":["local.project_name"]},"validation_method":{"references":["var.certificate_validation_method"]}},"schema_version":0},{"address":"aws_acm_certificate_validation.dns_acm_validation01_dns_bonus","mode":"managed","type":"aws_acm_certificate_validation","name":"dns_acm_validation01_dns_bonus","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["aws_acm_certificate.domain_acm_cert01.arn","aws_acm_certificate.domain_acm_cert01"]},"validation_record_fqdns":{"references":["aws_route53_record.dns_acm_validation_records01"]}},"schema_version":0,"count_expression":{"references":["var.certificate_validation_method"]}},{"address":"aws_acm_certificate_validation.domain_acm_validation01","mode":"managed","type":"aws_acm_certificate_validation","name":"domain_acm_validation01","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["aws_acm_certificate.domain_acm_cert01.arn","aws_acm_certificate.domain_acm_cert01"]}},"schema_version":0},{"address":"aws_cloudwatch_dashboard.cloudwatch_dashboard01","mode":"managed","type":"aws_cloudwatch_dashboard","name":"cloudwatch_dashboard01","provider_config_key":"aws","expressions":{"dashboard_body":{"references":["aws_lb.web_tier_alb01.arn_suffix","aws_lb.web_tier_alb01","aws_lb.web_tier_alb01.arn_suffix","aws_lb.web_tier_alb01","var.ny_cidr_blocks[0].region","var.ny_cidr_blocks[0]","var.ny_cidr_blocks","aws_lb.web_tier_alb01.arn_suffix","aws_lb.web_tier_alb01","var.ny_cidr_blocks[0].region","var.ny_cidr_blocks[0]","var.ny_cidr_blocks"]},"dashboard_name":{"references":["local.project_name"]}},"schema_version":0},{"address":"aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lab-1b-ec2-to-rds-logs","provider_config_key":"aws","expressions":{"name":{"references":["local.project_name"]},"retention_in_days":{"constant_value":1},"tags":{"references":["local.tags_1b"]}},"schema_version":0},{"address":"aws_cloudwatch_log_group.maximus_waf_log_group01","mode":"managed","type":"aws_cloudwatch_log_group","name":"maximus_waf_log_group01","provider_config_key":"aws","expressions":{"name":{"references":["local.project_name"]},"retention_in_days":{"references":["var.waf_log_retention_days"]},"tags":{"references":["local.project_name"]}},"schema_version":0,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_cloudwatch_log_metric_filter.db_connection-errors","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"db_connection-errors","provider_config_key":"aws","expressions":{"log_group_name":{"references":["aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs.name","aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs"]},"metric_transformation":[{"default_value":{"constant_value":"0"},"name":{"constant_value":"DBConnectionErrors"},"namespace":{"constant_value":"Armageddon/Lab1B/RDS"},"value":{"constant_value":"1"}}],"name":{"references":["local.project_name"]},"pattern":{"constant_value":" ?\"pymysql.err.OperationalError\" ?\"Can't connect\" ?\"ERROR\" ?\"failed\" "}},"schema_version":0},{"address":"aws_cloudwatch_metric_alarm.cloudwatch_alb_5xx_alarm01","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"cloudwatch_alb_5xx_alarm01","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.db_incidents-v2.arn","aws_sns_topic.db_incidents-v2"]},"alarm_name":{"references":["local.project_name"]},"comparison_operator":{"constant_value":"GreaterThanOrEqualToThreshold"},"dimensions":{"references":["aws_lb.web_tier_alb01.arn_suffix","aws_lb.web_tier_alb01"]},"evaluation_periods":{"references":["var.alb_5xx_evaluation_periods"]},"metric_name":{"constant_value":"HTTPCode_ELB_5XX_Count"},"namespace":{"constant_value":"AWS/ApplicationELB"},"period":{"references":["var.alb_5xx_period_seconds"]},"statistic":{"constant_value":"Sum"},"tags":{"references":["local.project_name"]},"threshold":{"references":["var.alb_5xx_threshold"]}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.db_connection-failure-alarm","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"db_connection-failure-alarm","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.db_incidents-v2.arn","aws_sns_topic.db_incidents-v2"]},"alarm_name":{"references":["local.project_name"]},"comparison_operator":{"constant_value":"GreaterThanOrEqualToThreshold"},"evaluation_periods":{"constant_value":1},"metric_name":{"constant_value":"DBConnectionErrors"},"namespace":{"constant_value":"Armageddon/Lab1B/RDS"},"period":{"constant_value":300},"statistic":{"constant_value":"Sum"},"tags":{"references":["local.tags_1b","local.project_name"]},"threshold":{"constant_value":3},"treat_missing_data":{"constant_value":"notBreaching"}},"schema_version":1,"depends_on":["aws_cloudwatch_log_metric_filter.db_connection-errors","aws_sns_topic.db_incidents-v2"]},{"address":"aws_db_event_subscription.db_incidents-v2","mode":"managed","type":"aws_db_event_subscription","name":"db_incidents-v2","provider_config_key":"aws","expressions":{"event_categories":{"constant_value":["availability","deletion","failover","failure","low storage","maintenance","notification","read replica","recovery","restoration"]},"name":{"constant_value":"rds-event-sub-v2"},"sns_topic":{"references":["aws_sns_topic.db_incidents-v2.arn","aws_sns_topic.db_incidents-v2"]},"source_ids":{"references":["aws_db_instance.lab-mysql.identifier","aws_db_instance.lab-mysql"]},"source_type":{"constant_value":"db-instance"}},"schema_version":0},{"address":"aws_db_instance.lab-mysql","mode":"managed","type":"aws_db_instance","name":"lab-mysql","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":5},"allow_major_version_upgrade":{"constant_value":true},"db_name":{"constant_value":"labmysql"},"db_subnet_group_name":{"references":["aws_db_subnet_group.RDS-subnet-group.name","aws_db_subnet_group.RDS-subnet-group"]},"engine":{"constant_value":"mysql"},"engine_version":{"constant_value":"8.4"},"identifier":{"constant_value":"lab-mysql"},"instance_class":{"constant_value":"db.t3.micro"},"multi_az":{"constant_value":true},"password":{"references":["random_password.rds_password.result","random_password.rds_password"]},"publicly_accessible":{"constant_value":false},"skip_final_snapshot":{"constant_value":true},"username":{"constant_value":"admin"},"vpc_security_group_ids":{"references":["aws_security_group.sql_database.id","aws_security_group.sql_database"]}},"schema_version":2},{"address":"aws_db_subnet_group.RDS-subnet-group","mode":"managed","type":"aws_db_subnet_group","name":"RDS-subnet-group","provider_config_key":"aws","expressions":{"name":{"constant_value":"lab-mysql-subnet-group"},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"constant_value":{"Name":"My DB subnet group"}}},"schema_version":0},{"address":"aws_eip.NY-eip","mode":"managed","type":"aws_eip","name":"NY-eip","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["var.eip[1]","var.eip"]}},"schema_version":0,"depends_on":["aws_internet_gateway.NY_igw"]},{"address":"aws_iam_instance_profile.ec2_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_profile","provider_config_key":"aws","expressions":{"name":{"references":["local.project_name"]},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_policy.policy_leastpriv_cwlogs01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_cwlogs01","provider_config_key":"aws","expressions":{"description":{"constant_value":"Least-privilege CloudWatch Logs write for the app log group"},"name":{"references":["local.armageddon_prefix"]},"policy":{"references":["aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs.arn","aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs"]}},"schema_version":0},{"address":"aws_iam_policy.policy_leastpriv_read_params01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_read_params01","provider_config_key":"aws","expressions":{"description":{"constant_value":"Least-privilege read for SSM Parameter Store under /armageddon/1b/database/*"},"name":{"references":["local.armageddon_prefix"]},"policy":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01","data.aws_caller_identity.current_self01.account_id","data.aws_caller_identity.current_self01"]}},"schema_version":0},{"address":"aws_iam_policy.policy_leastpriv_read_secret01","mode":"managed","type":"aws_iam_policy","name":"policy_leastpriv_read_secret01","provider_config_key":"aws","expressions":{"description":{"constant_value":"Least-privilege read for the lab DB secret"},"name":{"references":["local.armageddon_prefix"]},"policy":{"references":["local.secret_arn_guess"]}},"schema_version":0},{"address":"aws_iam_role.ec2-to-secretsmanager-rolev2","mode":"managed","type":"aws_iam_role","name":"ec2-to-secretsmanager-rolev2","provider_config_key":"aws","expressions":{"assume_role_policy":{},"inline_policy":[{"name":{"constant_value":"lab1a_inline_policy"},"policy":{}}],"name":{"constant_value":"ec2-to-secretsmanager-rolev2"},"tags":{"constant_value":{"tag-key":"ec2-to-secretsmanager-rolev2"}}},"schema_version":0},{"address":"aws_iam_role.maximus_firehose_role01","mode":"managed","type":"aws_iam_role","name":"maximus_firehose_role01","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.project_name"]}},"schema_version":0,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_iam_role_policy.maximus_firehose_policy01","mode":"managed","type":"aws_iam_role_policy","name":"maximus_firehose_policy01","provider_config_key":"aws","expressions":{"name":{"references":["local.project_name"]},"policy":{"references":["aws_s3_bucket.maximus_firehose_waf_dest_bucket01[0].arn","aws_s3_bucket.maximus_firehose_waf_dest_bucket01[0]","aws_s3_bucket.maximus_firehose_waf_dest_bucket01","aws_s3_bucket.maximus_firehose_waf_dest_bucket01[0].arn","aws_s3_bucket.maximus_firehose_waf_dest_bucket01[0]","aws_s3_bucket.maximus_firehose_waf_dest_bucket01"]},"role":{"references":["aws_iam_role.maximus_firehose_role01[0].id","aws_iam_role.maximus_firehose_role01[0]","aws_iam_role.maximus_firehose_role01"]}},"schema_version":0,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_iam_role_policy_attachment.AmazonSSMManagedInstanceCore_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"AmazonSSMManagedInstanceCore_policy_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.CloudWatchAgentServerPolicy_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"CloudWatchAgentServerPolicy_policy_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.CloudWatchLogsReadOnlyAccess_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"CloudWatchLogsReadOnlyAccess_policy_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/CloudWatchLogsReadOnlyAccess"},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.SecretsManagerReadWrite_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"SecretsManagerReadWrite_policy_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/SecretsManagerReadWrite"},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_cwlogs01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_cwlogs01","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.policy_leastpriv_cwlogs01.arn","aws_iam_policy.policy_leastpriv_cwlogs01"]},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_params01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_params01","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.policy_leastpriv_read_params01.arn","aws_iam_policy.policy_leastpriv_read_params01"]},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.policy_attach_lp_secret01","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach_lp_secret01","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.policy_leastpriv_read_secret01.arn","aws_iam_policy.policy_leastpriv_read_secret01"]},"role":{"references":["aws_iam_role.ec2-to-secretsmanager-rolev2.name","aws_iam_role.ec2-to-secretsmanager-rolev2"]}},"schema_version":0},{"address":"aws_instance.ec201_private_bonus","mode":"managed","type":"aws_instance","name":"ec201_private_bonus","provider_config_key":"aws","expressions":{"ami":{"references":["var.ny_cidr_blocks[0].image_id","var.ny_cidr_blocks[0]","var.ny_cidr_blocks"]},"iam_instance_profile":{"references":["aws_iam_instance_profile.ec2_profile.name","aws_iam_instance_profile.ec2_profile"]},"instance_type":{"references":["var.ny_cidr_blocks[0].instance_type","var.ny_cidr_blocks[0]","var.ny_cidr_blocks"]},"subnet_id":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_security_group_ids":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]}},"schema_version":2},{"address":"aws_instance.web_server-ec2-to-rds","mode":"managed","type":"aws_instance","name":"web_server-ec2-to-rds","provider_config_key":"aws","expressions":{"ami":{"constant_value":"ami-0532be01f26a3de55"},"associate_public_ip_address":{"constant_value":true},"iam_instance_profile":{"references":["aws_iam_instance_profile.ec2_profile.name","aws_iam_instance_profile.ec2_profile"]},"instance_type":{"constant_value":"t3.micro"},"key_name":{"constant_value":"pleaseLord-1-7-26"},"subnet_id":{"references":["aws_subnet.public-us-east-1b.id","aws_subnet.public-us-east-1b"]},"tags":{"constant_value":{"Name":"web_server-ec2-to-rds"}},"user_data":{},"vpc_security_group_ids":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01","aws_security_group.ping.id","aws_security_group.ping"]}},"schema_version":2},{"address":"aws_internet_gateway.NY_igw","mode":"managed","type":"aws_internet_gateway","name":"NY_igw","provider_config_key":"aws","expressions":{"tags":{"references":["var.igw[1]","var.igw"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_kinesis_firehose_delivery_stream.maximus_waf_firehose01","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"maximus_waf_firehose01","provider_config_key":"aws","expressions":{"destination":{"constant_value":"extended_s3"},"extended_s3_configuration":[{"bucket_arn":{"references":["aws_s3_bucket.maximus_firehose_waf_dest_bucket01[0].arn","aws_s3_bucket.maximus_firehose_waf_dest_bucket01[0]","aws_s3_bucket.maximus_firehose_waf_dest_bucket01"]},"prefix":{"constant_value":"waf-logs/"},"role_arn":{"references":["aws_iam_role.maximus_firehose_role01[0].arn","aws_iam_role.maximus_firehose_role01[0]","aws_iam_role.maximus_firehose_role01"]}}],"name":{"references":["local.project_name"]}},"schema_version":1,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_lb.web_tier_alb01","mode":"managed","type":"aws_lb","name":"web_tier_alb01","provider_config_key":"aws","expressions":{"access_logs":[{"bucket":{"references":["aws_s3_bucket.maximus_alb_logs_bucket01[0].bucket","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01"]},"enabled":{"references":["var.enable_alb_access_logs"]},"prefix":{"references":["var.alb_access_logs_prefix"]}}],"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["local.project_name"]},"security_groups":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]},"subnets":{"references":["aws_subnet.public-us-east-1a.id","aws_subnet.public-us-east-1a","aws_subnet.public-us-east-1b.id","aws_subnet.public-us-east-1b","aws_subnet.public-us-east-1c.id","aws_subnet.public-us-east-1c"]},"tags":{"references":["local.project_name"]}},"schema_version":0},{"address":"aws_lb_listener.web_tier_alb_http_listener01","mode":"managed","type":"aws_lb_listener","name":"web_tier_alb_http_listener01","provider_config_key":"aws","expressions":{"default_action":[{"redirect":[{"port":{"constant_value":"443"},"protocol":{"constant_value":"HTTPS"},"status_code":{"constant_value":"HTTP_301"}}],"type":{"constant_value":"redirect"}}],"load_balancer_arn":{"references":["aws_lb.web_tier_alb01.arn","aws_lb.web_tier_alb01"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_listener.web_tier_alb_https_listener01","mode":"managed","type":"aws_lb_listener","name":"web_tier_alb_https_listener01","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["aws_acm_certificate_validation.domain_acm_validation01.certificate_arn","aws_acm_certificate_validation.domain_acm_validation01"]},"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.web_tier_tg01.arn","aws_lb_target_group.web_tier_tg01"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.web_tier_alb01.arn","aws_lb.web_tier_alb01"]},"port":{"constant_value":443},"protocol":{"constant_value":"HTTPS"},"ssl_policy":{"constant_value":"ELBSecurityPolicy-TLS13-1-2-2021-06"}},"schema_version":0,"depends_on":["aws_acm_certificate_validation.domain_acm_validation01"]},{"address":"aws_lb_target_group.web_tier_tg01","mode":"managed","type":"aws_lb_target_group","name":"web_tier_tg01","provider_config_key":"aws","expressions":{"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200-399"},"path":{"constant_value":"/"},"port":{"constant_value":"traffic-port"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":2}}],"name":{"references":["local.project_name"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.project_name"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_lb_target_group_attachment.alb-to-ec2_tg_attach01","mode":"managed","type":"aws_lb_target_group_attachment","name":"alb-to-ec2_tg_attach01","provider_config_key":"aws","expressions":{"port":{"constant_value":80},"target_group_arn":{"references":["aws_lb_target_group.web_tier_tg01.arn","aws_lb_target_group.web_tier_tg01"]},"target_id":{"references":["aws_instance.ec201_private_bonus.id","aws_instance.ec201_private_bonus"]}},"schema_version":0},{"address":"aws_nat_gateway.NY-nat","mode":"managed","type":"aws_nat_gateway","name":"NY-nat","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.NY-eip.id","aws_eip.NY-eip"]},"subnet_id":{"references":["aws_subnet.public-us-east-1a.id","aws_subnet.public-us-east-1a"]},"tags":{"references":["var.nat[1]","var.nat"]}},"schema_version":0,"depends_on":["aws_internet_gateway.NY_igw"]},{"address":"aws_route53_record.dns_acm_validation_records01","mode":"managed","type":"aws_route53_record","name":"dns_acm_validation_records01","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"records":{"references":["each.value.record","each.value"]},"ttl":{"constant_value":60},"type":{"references":["each.value.type","each.value"]},"zone_id":{"references":["local.dns_zone_id"]}},"schema_version":2,"for_each_expression":{"references":["var.certificate_validation_method","aws_acm_certificate.domain_acm_cert01.domain_validation_options","aws_acm_certificate.domain_acm_cert01"]}},{"address":"aws_route53_record.zone_apex_alias01","mode":"managed","type":"aws_route53_record","name":"zone_apex_alias01","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["aws_lb.web_tier_alb01.dns_name","aws_lb.web_tier_alb01"]},"zone_id":{"references":["aws_lb.web_tier_alb01.zone_id","aws_lb.web_tier_alb01"]}}],"name":{"references":["var.domain_name"]},"type":{"constant_value":"A"},"zone_id":{"references":["local.dns_zone_id"]}},"schema_version":2},{"address":"aws_route53_zone.dns_zone01","mode":"managed","type":"aws_route53_zone","name":"dns_zone01","provider_config_key":"aws","expressions":{"name":{"references":["local.dns_zone_name"]},"tags":{"references":["local.project_name"]}},"schema_version":0,"count_expression":{"references":["var.manage_route53_in_terraform"]}},{"address":"aws_route_table.private-NY","mode":"managed","type":"aws_route_table","name":"private-NY","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.NY-nat.id","aws_nat_gateway.NY-nat"]},"tags":{"constant_value":{"Name":"private-NY"}},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_route_table.public-NY","mode":"managed","type":"aws_route_table","name":"public-NY","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.NY_igw.id","aws_internet_gateway.NY_igw"]},"tags":{"constant_value":{"Name":"public-NY","service":"NY_VPC_Public_RT"}},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_route_table_association.private-us-east-1a","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1a","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private-NY.id","aws_route_table.private-NY"]},"subnet_id":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a"]}},"schema_version":0},{"address":"aws_route_table_association.private-us-east-1b","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1b","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private-NY.id","aws_route_table.private-NY"]},"subnet_id":{"references":["aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b"]}},"schema_version":0},{"address":"aws_route_table_association.private-us-east-1c","mode":"managed","type":"aws_route_table_association","name":"private-us-east-1c","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private-NY.id","aws_route_table.private-NY"]},"subnet_id":{"references":["aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]}},"schema_version":0},{"address":"aws_route_table_association.public-us-east-1a","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1a","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public-NY.id","aws_route_table.public-NY"]},"subnet_id":{"references":["aws_subnet.public-us-east-1a.id","aws_subnet.public-us-east-1a"]}},"schema_version":0},{"address":"aws_route_table_association.public-us-east-1b","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1b","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public-NY.id","aws_route_table.public-NY"]},"subnet_id":{"references":["aws_subnet.public-us-east-1b.id","aws_subnet.public-us-east-1b"]}},"schema_version":0},{"address":"aws_route_table_association.public-us-east-1c","mode":"managed","type":"aws_route_table_association","name":"public-us-east-1c","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public-NY.id","aws_route_table.public-NY"]},"subnet_id":{"references":["aws_subnet.public-us-east-1c.id","aws_subnet.public-us-east-1c"]}},"schema_version":0},{"address":"aws_s3_bucket.maximus_alb_logs_bucket01","mode":"managed","type":"aws_s3_bucket","name":"maximus_alb_logs_bucket01","provider_config_key":"aws","expressions":{"bucket":{"references":["local.project_name","data.aws_caller_identity.current_self01.account_id","data.aws_caller_identity.current_self01"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.project_name"]}},"schema_version":0,"count_expression":{"references":["var.enable_alb_access_logs"]}},{"address":"aws_s3_bucket.maximus_firehose_waf_dest_bucket01","mode":"managed","type":"aws_s3_bucket","name":"maximus_firehose_waf_dest_bucket01","provider_config_key":"aws","expressions":{"bucket":{"references":["local.project_name","data.aws_caller_identity.current_self01.account_id","data.aws_caller_identity.current_self01"]},"tags":{"references":["local.project_name"]}},"schema_version":0,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_s3_bucket.maximus_waf_logs_bucket01","mode":"managed","type":"aws_s3_bucket","name":"maximus_waf_logs_bucket01","provider_config_key":"aws","expressions":{"bucket":{"references":["local.project_name","data.aws_caller_identity.current_self01.account_id","data.aws_caller_identity.current_self01"]},"tags":{"references":["local.project_name"]}},"schema_version":0,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_s3_bucket_ownership_controls.maximus_alb_logs_owner01","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"maximus_alb_logs_owner01","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.maximus_alb_logs_bucket01[0].id","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01"]},"rule":[{"object_ownership":{"constant_value":"BucketOwnerPreferred"}}]},"schema_version":0,"count_expression":{"references":["var.enable_alb_access_logs"]}},{"address":"aws_s3_bucket_policy.maximus_alb_logs_policy01","mode":"managed","type":"aws_s3_bucket_policy","name":"maximus_alb_logs_policy01","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.maximus_alb_logs_bucket01[0].id","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01"]},"policy":{"references":["aws_s3_bucket.maximus_alb_logs_bucket01[0].arn","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01","aws_s3_bucket.maximus_alb_logs_bucket01[0].arn","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01","data.aws_elb_service_account.main.arn","data.aws_elb_service_account.main","aws_s3_bucket.maximus_alb_logs_bucket01[0].arn","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01","var.alb_access_logs_prefix","data.aws_caller_identity.current_self01.account_id","data.aws_caller_identity.current_self01"]}},"schema_version":0,"count_expression":{"references":["var.enable_alb_access_logs"]}},{"address":"aws_s3_bucket_public_access_block.maximus_alb_logs_pab01","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"maximus_alb_logs_pab01","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.maximus_alb_logs_bucket01[0].id","aws_s3_bucket.maximus_alb_logs_bucket01[0]","aws_s3_bucket.maximus_alb_logs_bucket01"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.enable_alb_access_logs"]}},{"address":"aws_s3_bucket_public_access_block.maximus_waf_logs_pab01","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"maximus_waf_logs_pab01","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.maximus_waf_logs_bucket01[0].id","aws_s3_bucket.maximus_waf_logs_bucket01[0]","aws_s3_bucket.maximus_waf_logs_bucket01"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.waf_log_destination"]}},{"address":"aws_secretsmanager_secret.lab1a-rds-mysql-v28","mode":"managed","type":"aws_secretsmanager_secret","name":"lab1a-rds-mysql-v28","provider_config_key":"aws","expressions":{"name":{"constant_value":"lab1a-rds-mysql-v28"}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.lab1a-rds-mysql-version","mode":"managed","type":"aws_secretsmanager_secret_version","name":"lab1a-rds-mysql-version","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.lab1a-rds-mysql-v28.id","aws_secretsmanager_secret.lab1a-rds-mysql-v28"]},"secret_string":{"references":["aws_db_instance.lab-mysql.username","aws_db_instance.lab-mysql","random_password.rds_password.result","random_password.rds_password","aws_db_instance.lab-mysql.address","aws_db_instance.lab-mysql","aws_db_instance.lab-mysql.port","aws_db_instance.lab-mysql","aws_db_instance.lab-mysql.db_name","aws_db_instance.lab-mysql"]}},"schema_version":0},{"address":"aws_security_group.endpoint_vpce_sg01","mode":"managed","type":"aws_security_group","name":"endpoint_vpce_sg01","provider_config_key":"aws","expressions":{"description":{"constant_value":"SG for VPC Interface Endpoints"},"name":{"references":["local.armageddon_prefix"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_security_group.ping","mode":"managed","type":"aws_security_group","name":"ping","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow icmp for ping"},"name":{"constant_value":"ping"},"tags":{"constant_value":{"Name":"icmp-for-ping"}},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_security_group.sql_database","mode":"managed","type":"aws_security_group","name":"sql_database","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow access to RDS"},"name":{"constant_value":"allow_port_for_rds"},"tags":{"constant_value":{"Name":"allow_access-RDS"}},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_security_group.web_load_balancer_alb_sg01","mode":"managed","type":"aws_security_group","name":"web_load_balancer_alb_sg01","provider_config_key":"aws","expressions":{"description":{"constant_value":"ALB security group"},"name":{"references":["local.project_name"]},"tags":{"references":["local.project_name"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_security_group.web_tier_ec2_sg01","mode":"managed","type":"aws_security_group","name":"web_tier_ec2_sg01","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow inbound HTTP and SSH for web apps in web tier"},"name":{"constant_value":"allow_http_ssh_web_app"},"tags":{"constant_value":{"Name":"allow_http_ssh_web_app"}},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_security_group_rule.ec2_ingress_from_alb01","mode":"managed","type":"aws_security_group_rule","name":"ec2_ingress_from_alb01","provider_config_key":"aws","expressions":{"from_port":{"constant_value":80},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]},"source_security_group_id":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]},"to_port":{"constant_value":80},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_sns_topic.db_incidents-v2","mode":"managed","type":"aws_sns_topic","name":"db_incidents-v2","provider_config_key":"aws","expressions":{"name":{"constant_value":"db_incidents-v2"}},"schema_version":0},{"address":"aws_sns_topic_subscription.db_incidents-v2","mode":"managed","type":"aws_sns_topic_subscription","name":"db_incidents-v2","provider_config_key":"aws","expressions":{"endpoint":{"constant_value":"king.konvoy1@gmail.com"},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.db_incidents-v2.arn","aws_sns_topic.db_incidents-v2"]}},"schema_version":0},{"address":"aws_ssm_parameter.db-parameters-for-1b","mode":"managed","type":"aws_ssm_parameter","name":"db-parameters-for-1b","provider_config_key":"aws","expressions":{"name":{"references":["each.key"]},"type":{"constant_value":"SecureString"},"value":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.db_parameters_for_ssm_parameter"]}},{"address":"aws_subnet.private-us-east-1a","mode":"managed","type":"aws_subnet","name":"private-us-east-1a","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.ny_cidr_blocks[4].availability_zone","var.ny_cidr_blocks[4]","var.ny_cidr_blocks"]},"cidr_block":{"references":["var.ny_cidr_blocks[4].cidr_block","var.ny_cidr_blocks[4]","var.ny_cidr_blocks"]},"tags":{"references":["var.ny_cidr_blocks[4].name","var.ny_cidr_blocks[4]","var.ny_cidr_blocks"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_subnet.private-us-east-1b","mode":"managed","type":"aws_subnet","name":"private-us-east-1b","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.ny_cidr_blocks[5].availability_zone","var.ny_cidr_blocks[5]","var.ny_cidr_blocks"]},"cidr_block":{"references":["var.ny_cidr_blocks[5].cidr_block","var.ny_cidr_blocks[5]","var.ny_cidr_blocks"]},"tags":{"references":["var.ny_cidr_blocks[5].name","var.ny_cidr_blocks[5]","var.ny_cidr_blocks"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_subnet.private-us-east-1c","mode":"managed","type":"aws_subnet","name":"private-us-east-1c","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.ny_cidr_blocks[6].availability_zone","var.ny_cidr_blocks[6]","var.ny_cidr_blocks"]},"cidr_block":{"references":["var.ny_cidr_blocks[6].cidr_block","var.ny_cidr_blocks[6]","var.ny_cidr_blocks"]},"tags":{"references":["var.ny_cidr_blocks[6].name","var.ny_cidr_blocks[6]","var.ny_cidr_blocks"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_subnet.public-us-east-1a","mode":"managed","type":"aws_subnet","name":"public-us-east-1a","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.ny_cidr_blocks[1].availability_zone","var.ny_cidr_blocks[1]","var.ny_cidr_blocks"]},"cidr_block":{"references":["var.ny_cidr_blocks[1].cidr_block","var.ny_cidr_blocks[1]","var.ny_cidr_blocks"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.ny_cidr_blocks[1].name","var.ny_cidr_blocks[1]","var.ny_cidr_blocks"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_subnet.public-us-east-1b","mode":"managed","type":"aws_subnet","name":"public-us-east-1b","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.ny_cidr_blocks[2].availability_zone","var.ny_cidr_blocks[2]","var.ny_cidr_blocks"]},"cidr_block":{"references":["var.ny_cidr_blocks[2].cidr_block","var.ny_cidr_blocks[2]","var.ny_cidr_blocks"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.ny_cidr_blocks[2].name","var.ny_cidr_blocks[2]","var.ny_cidr_blocks"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_subnet.public-us-east-1c","mode":"managed","type":"aws_subnet","name":"public-us-east-1c","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.ny_cidr_blocks[3].availability_zone","var.ny_cidr_blocks[3]","var.ny_cidr_blocks"]},"cidr_block":{"references":["var.ny_cidr_blocks[3].cidr_block","var.ny_cidr_blocks[3]","var.ny_cidr_blocks"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.ny_cidr_blocks[3].name","var.ny_cidr_blocks[3]","var.ny_cidr_blocks"]},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":1},{"address":"aws_vpc.app1-vpc-b-ny","mode":"managed","type":"aws_vpc","name":"app1-vpc-b-ny","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.ny_cidr_blocks[0].cidr_block","var.ny_cidr_blocks[0]","var.ny_cidr_blocks"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"instance_tenancy":{"constant_value":"default"},"tags":{"constant_value":{"Name":"app1-vpc-b-ny","Owner":"Michael","Planet":"Maximus","Service":"application1"}}},"schema_version":1},{"address":"aws_vpc_endpoint.endpoint_vpce_ec2messages01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ec2messages01","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_endpoint.endpoint_vpce_kms01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_kms01","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_endpoint.endpoint_vpce_logs01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_logs01","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_endpoint.endpoint_vpce_s3_gw01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_s3_gw01","provider_config_key":"aws","expressions":{"route_table_ids":{"references":["aws_route_table.private-NY.id","aws_route_table.private-NY"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Gateway"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_endpoint.endpoint_vpce_secrets01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_secrets01","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_endpoint.endpoint_vpce_ssm01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ssm01","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_endpoint.endpoint_vpce_ssmmessages01","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint_vpce_ssmmessages01","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"service_name":{"references":["data.aws_region.current_region01.name","data.aws_region.current_region01"]},"subnet_ids":{"references":["aws_subnet.private-us-east-1a.id","aws_subnet.private-us-east-1a","aws_subnet.private-us-east-1b.id","aws_subnet.private-us-east-1b","aws_subnet.private-us-east-1c.id","aws_subnet.private-us-east-1c"]},"tags":{"references":["local.armageddon_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.app1-vpc-b-ny.id","aws_vpc.app1-vpc-b-ny"]}},"schema_version":0},{"address":"aws_vpc_security_group_egress_rule.egress_for_ping","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"egress_for_ping","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"ip_protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.ping.id","aws_security_group.ping"]}},"schema_version":0},{"address":"aws_vpc_security_group_egress_rule.sql_database_allow_all_traffic_ipv4","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"sql_database_allow_all_traffic_ipv4","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"ip_protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.sql_database.id","aws_security_group.sql_database"]}},"schema_version":0},{"address":"aws_vpc_security_group_egress_rule.web_load_balancer_allow_all_traffic_ipv4","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"web_load_balancer_allow_all_traffic_ipv4","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"ip_protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]}},"schema_version":0},{"address":"aws_vpc_security_group_egress_rule.web_tier_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"web_tier_egress","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"ip_protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.endpoint_vpce_sg01_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"endpoint_vpce_sg01_allow_https","provider_config_key":"aws","expressions":{"from_port":{"constant_value":443},"ip_protocol":{"constant_value":"tcp"},"referenced_security_group_id":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]},"security_group_id":{"references":["aws_security_group.endpoint_vpce_sg01.id","aws_security_group.endpoint_vpce_sg01"]},"to_port":{"constant_value":443}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.icmp","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"icmp","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":-1},"ip_protocol":{"constant_value":"icmp"},"security_group_id":{"references":["aws_security_group.ping.id","aws_security_group.ping"]},"to_port":{"constant_value":-1}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.sql_database_allow_ec2_web_tier_sg","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"sql_database_allow_ec2_web_tier_sg","provider_config_key":"aws","expressions":{"from_port":{"constant_value":3306},"ip_protocol":{"constant_value":"tcp"},"referenced_security_group_id":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]},"security_group_id":{"references":["aws_security_group.sql_database.id","aws_security_group.sql_database"]},"to_port":{"constant_value":3306}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.web_load_balancer_allow_http","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_load_balancer_allow_http","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":80},"ip_protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]},"to_port":{"constant_value":80}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.web_load_balancer_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_load_balancer_allow_https","provider_config_key":"aws","expressions":{"cidr_ipv4":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":443},"ip_protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]},"to_port":{"constant_value":443}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.web_tier_allow_http","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_tier_allow_http","provider_config_key":"aws","expressions":{"from_port":{"constant_value":80},"ip_protocol":{"constant_value":"tcp"},"referenced_security_group_id":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]},"security_group_id":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]},"to_port":{"constant_value":80}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.web_tier_allow_https","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"web_tier_allow_https","provider_config_key":"aws","expressions":{"from_port":{"constant_value":443},"ip_protocol":{"constant_value":"tcp"},"referenced_security_group_id":{"references":["aws_security_group.web_load_balancer_alb_sg01.id","aws_security_group.web_load_balancer_alb_sg01"]},"security_group_id":{"references":["aws_security_group.web_tier_ec2_sg01.id","aws_security_group.web_tier_ec2_sg01"]},"to_port":{"constant_value":443}},"schema_version":0},{"address":"aws_wafv2_web_acl.alb_waf01","mode":"managed","type":"aws_wafv2_web_acl","name":"alb_waf01","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"name":{"references":["local.project_name"]},"rule":[{"name":{"constant_value":"AWSManagedRulesCommonRuleSet"},"override_action":[{"none":[{}]}],"priority":{"constant_value":1},"statement":[{"managed_rule_group_statement":[{"name":{"constant_value":"AWSManagedRulesCommonRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"references":["local.project_name"]},"sampled_requests_enabled":{"constant_value":true}}]}],"scope":{"constant_value":"REGIONAL"},"tags":{"references":["local.project_name"]},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"references":["local.project_name"]},"sampled_requests_enabled":{"constant_value":true}}]},"schema_version":0,"count_expression":{"references":["var.enable_waf"]}},{"address":"aws_wafv2_web_acl_association.alb_waf_assoc01","mode":"managed","type":"aws_wafv2_web_acl_association","name":"alb_waf_assoc01","provider_config_key":"aws","expressions":{"resource_arn":{"references":["aws_lb.web_tier_alb01.arn","aws_lb.web_tier_alb01"]},"web_acl_arn":{"references":["aws_wafv2_web_acl.alb_waf01[0].arn","aws_wafv2_web_acl.alb_waf01[0]","aws_wafv2_web_acl.alb_waf01"]}},"schema_version":0,"count_expression":{"references":["var.enable_waf"]}},{"address":"aws_wafv2_web_acl_logging_configuration.maximus_waf_logging01","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"maximus_waf_logging01","provider_config_key":"aws","expressions":{"log_destination_configs":{"references":["aws_cloudwatch_log_group.maximus_waf_log_group01[0].arn","aws_cloudwatch_log_group.maximus_waf_log_group01[0]","aws_cloudwatch_log_group.maximus_waf_log_group01"]},"resource_arn":{"references":["aws_wafv2_web_acl.alb_waf01[0].arn","aws_wafv2_web_acl.alb_waf01[0]","aws_wafv2_web_acl.alb_waf01"]}},"schema_version":0,"count_expression":{"references":["var.enable_waf","var.waf_log_destination"]},"depends_on":["aws_wafv2_web_acl.alb_waf01"]},{"address":"aws_wafv2_web_acl_logging_configuration.maximus_waf_logging_firehose01","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"maximus_waf_logging_firehose01","provider_config_key":"aws","expressions":{"log_destination_configs":{"references":["aws_kinesis_firehose_delivery_stream.maximus_waf_firehose01[0].arn","aws_kinesis_firehose_delivery_stream.maximus_waf_firehose01[0]","aws_kinesis_firehose_delivery_stream.maximus_waf_firehose01"]},"resource_arn":{"references":["aws_wafv2_web_acl.alb_waf01[0].arn","aws_wafv2_web_acl.alb_waf01[0]","aws_wafv2_web_acl.alb_waf01"]}},"schema_version":0,"count_expression":{"references":["var.enable_waf","var.waf_log_destination"]},"depends_on":["aws_wafv2_web_acl.alb_waf01"]},{"address":"aws_wafv2_web_acl_logging_configuration.maximus_waf_logging_s3_01","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"maximus_waf_logging_s3_01","provider_config_key":"aws","expressions":{"log_destination_configs":{"references":["aws_s3_bucket.maximus_waf_logs_bucket01[0].arn","aws_s3_bucket.maximus_waf_logs_bucket01[0]","aws_s3_bucket.maximus_waf_logs_bucket01"]},"resource_arn":{"references":["aws_wafv2_web_acl.alb_waf01[0].arn","aws_wafv2_web_acl.alb_waf01[0]","aws_wafv2_web_acl.alb_waf01"]}},"schema_version":0,"count_expression":{"references":["var.enable_waf","var.waf_log_destination"]},"depends_on":["aws_wafv2_web_acl.alb_waf01"]},{"address":"random_password.rds_password","mode":"managed","type":"random_password","name":"rds_password","provider_config_key":"random","expressions":{"length":{"constant_value":8},"lower":{"constant_value":true},"numeric":{"constant_value":true},"special":{"constant_value":false},"upper":{"constant_value":true}},"schema_version":3},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0},{"address":"data.aws_caller_identity.current_self01","mode":"data","type":"aws_caller_identity","name":"current_self01","provider_config_key":"aws","schema_version":0},{"address":"data.aws_elb_service_account.main","mode":"data","type":"aws_elb_service_account","name":"main","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current_region01","mode":"data","type":"aws_region","name":"current_region01","provider_config_key":"aws","schema_version":0},{"address":"data.aws_ssm_parameter.al2023","mode":"data","type":"aws_ssm_parameter","name":"al2023","provider_config_key":"aws","expressions":{"name":{"constant_value":"/aws/service/ami-amazon-linux-latest/al2023-ami-kernel-default-x86_64"}},"schema_version":0}],"variables":{"alb_5xx_evaluation_periods":{"default":1,"description":"Evaluation periods for alarm."},"alb_5xx_period_seconds":{"default":300,"description":"CloudWatch alarm period."},"alb_5xx_threshold":{"default":10,"description":"Alarm threshold for ALB 5xx count."},"alb_access_logs_prefix":{"default":"armageddon-alb-access-logs","description":"S3 prefix for ALB access logs."},"app_subdomain":{"default":"app","description":"App hostname prefix (e.g., app.madibamaximus.click)."},"certificate_validation_method":{"default":"DNS","description":"ACM validation method. Students can do DNS (Route53) or EMAIL."},"db_parameters_for_ssm_parameter":{"default":{"endpoint":"lab-mysql.c23c4ck0msxh.us-east-1.rds.amazonaws.com","name":"lab-mysql","port":"3306"},"description":"Database parameters stored in SSM Parameter Store"},"domain_name":{"default":"madibamaximus.click","description":"Base domain students registered (e.g., madibamaximus.click)."},"eip":{"description":"igw for each nat"},"enable_alb_access_logs":{"default":true,"description":"Toggle ALB access logging to S3."},"enable_waf":{"default":true,"description":"Toggle WAF creation."},"igw":{"description":"igw for each vpc"},"manage_route53_in_terraform":{"default":false,"description":"Whether to manage Route53 zone in Terraform."},"naming_convention3":{"default":{"California":{"igw_id":"California_igw","nat_id":"California-nat","subnet_id1":"private-us-west-1a","subnet_id2":"private-us-west-1b","subnet_id3":"private-us-west-1c","subnet_id4":"public-us-west-1a","subnet_id5":"public-us-west-1b","subnet_id6":"public-us-west-1c","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-G-California"},"HongKong":{"igw_id":"Hong-Kong_igw","nat_id":"Hong-Kong-nat","subnet_id1":"private-ap-east-1a","subnet_id2":"private-ap-east-1b","subnet_id3":"private-ap-east-1c","subnet_id4":"public-ap-east-1a","subnet_id5":"public-ap-east-1b","subnet_id6":"public-ap-east-1c","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-F-Hong-Kong"},"London":{"igw_id":"London_igw","nat_id":"London-nat","subnet_id1":"private-eu-west-2a","subnet_id2":"private-eu-west-2b","subnet_id3":"private-eu-west-2c","subnet_id4":"public-eu-west-2a","subnet_id5":"public-eu-west-2b","subnet_id6":"public-eu-west-2c","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-C-London"},"NewYork":{"igw_id":"NY_igw","nat_id":"NY-nat","subnet_id1":"private-us-east-1a","subnet_id2":"private-us-east-1b","subnet_id3":"private-us-east-1c","subnet_id4":"public-us-east-1a","subnet_id5":"public-us-east-1b","subnet_id6":"public-us-east-1c","tags":{"Name":"ForNewYork","Service":"application1"},"vpc_id":"app1-vpc-B-NY"},"SaoPaulo":{"igw_id":"Sao-Paulo_igw","nat_id":"Sao-Paulo-nat","subnet_id1":"private-sa-east-1a","subnet_id2":"private-sa-east-1b","subnet_id3":"private-sa-east-1c","subnet_id4":"public-sa-east-1a","subnet_id5":"public-sa-east-1b","subnet_id6":"public-sa-east-1c","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-D-Sao-Paulo"},"Sydney":{"igw_id":"Sydney_igw","nat_id":"Sydney-nat","subnet_id1":"private-ap-northeast-2a","subnet_id2":"private-ap-northeast-2b","subnet_id3":"private-ap-northeast-2c","subnet_id4":"public-ap-northeast-2a","subnet_id5":"public-ap-northeast-2b","subnet_id6":"public-ap-northeast-2c","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-E-Sydney"},"Tokyo":{"igw_id":"Tokyo_igw","nat_id":"tokyo-nat","subnet_id1":"private-ap-northeast-1a","subnet_id2":"private-ap-northeast-1c","subnet_id3":"private-ap-northeast-1d","subnet_id4":"public-ap-northeast-1a","subnet_id5":"public-ap-northeast-1c","subnet_id6":"public-ap-northeast-1d","tags":{"Name":"ForTokyo","Service":"application1"},"vpc_id":"app1-vpc-A-Tokyo"}},"description":"creates names for resource ids"},"nat":{"description":"nat for each vpc"},"ny_cidr_blocks":{"description":"cidr blocks for vpc and subnets"},"route53_hosted_zone_id":{"default":"Z03960566UZQZIZPHD3F","description":"Pre-existing Route53 hosted zone ID (if not managing in Terraform)."},"waf_log_destination":{"default":"cloudwatch","description":"Choose WAF log destination: 'cloudwatch' or 's3'."},"waf_log_retention_days":{"default":30,"description":"Retention period for WAF logs in CloudWatch (if using CloudWatch)."}}}},"relevant_attributes":[{"resource":"aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs","attribute":["arn"]},{"resource":"aws_eip.NY-eip","attribute":["id"]},{"resource":"aws_security_group.web_tier_ec2_sg01","attribute":["id"]},{"resource":"data.aws_region.current_region01","attribute":["name"]},{"resource":"aws_acm_certificate.domain_acm_cert01","attribute":["domain_validation_options"]},{"resource":"aws_subnet.public-us-east-1a","attribute":["id"]},{"resource":"aws_db_subnet_group.RDS-subnet-group","attribute":["name"]},{"resource":"aws_subnet.private-us-east-1c","attribute":["id"]},{"resource":"aws_lb.web_tier_alb01","attribute":["arn"]},{"resource":"aws_s3_bucket.maximus_alb_logs_bucket01[0]","attribute":["id"]},{"resource":"aws_route53_record.dns_acm_validation_records01","attribute":[]},{"resource":"aws_security_group.web_load_balancer_alb_sg01","attribute":["id"]},{"resource":"data.aws_elb_service_account.main","attribute":["arn"]},{"resource":"aws_s3_bucket.maximus_alb_logs_bucket01[0]","attribute":["bucket"]},{"resource":"aws_acm_certificate.domain_acm_cert01","attribute":["arn"]},{"resource":"aws_acm_certificate_validation.domain_acm_validation01","attribute":["certificate_arn"]},{"resource":"aws_db_instance.lab-mysql","attribute":["username"]},{"resource":"aws_iam_instance_profile.ec2_profile","attribute":["name"]},{"resource":"aws_iam_policy.policy_leastpriv_cwlogs01","attribute":["arn"]},{"resource":"aws_internet_gateway.NY_igw","attribute":["id"]},{"resource":"aws_cloudwatch_dashboard.cloudwatch_dashboard01","attribute":["dashboard_name"]},{"resource":"random_password.rds_password","attribute":["result"]},{"resource":"aws_iam_role.ec2-to-secretsmanager-rolev2","attribute":["name"]},{"resource":"aws_lb_target_group.web_tier_tg01","attribute":["arn"]},{"resource":"aws_security_group.endpoint_vpce_sg01","attribute":["id"]},{"resource":"aws_db_instance.lab-mysql","attribute":["identifier"]},{"resource":"aws_instance.web_server-ec2-to-rds","attribute":["public_ip"]},{"resource":"aws_route_table.private-NY","attribute":["id"]},{"resource":"aws_s3_bucket.maximus_alb_logs_bucket01[0]","attribute":["arn"]},{"resource":"aws_security_group.ping","attribute":["id"]},{"resource":"data.aws_caller_identity.current_self01","attribute":["account_id"]},{"resource":"aws_nat_gateway.NY-nat","attribute":["id"]},{"resource":"aws_lb.web_tier_alb01","attribute":["arn_suffix"]},{"resource":"aws_subnet.public-us-east-1c","attribute":["id"]},{"resource":"aws_secretsmanager_secret.lab1a-rds-mysql-v28","attribute":["id"]},{"resource":"aws_iam_policy.policy_leastpriv_read_secret01","attribute":["arn"]},{"resource":"aws_route_table.public-NY","attribute":["id"]},{"resource":"aws_subnet.public-us-east-1b","attribute":["id"]},{"resource":"aws_instance.ec201_private_bonus","attribute":["id"]},{"resource":"aws_lb.web_tier_alb01","attribute":["zone_id"]},{"resource":"aws_security_group.sql_database","attribute":["id"]},{"resource":"aws_sns_topic.db_incidents-v2","attribute":["arn"]},{"resource":"aws_vpc.app1-vpc-b-ny","attribute":["id"]},{"resource":"aws_db_instance.lab-mysql","attribute":["port"]},{"resource":"aws_lb.web_tier_alb01","attribute":["dns_name"]},{"resource":"aws_vpc_endpoint.endpoint_vpce_ssm01","attribute":["id"]},{"resource":"aws_db_instance.lab-mysql","attribute":["address"]},{"resource":"aws_secretsmanager_secret.lab1a-rds-mysql-v28","attribute":["arn"]},{"resource":"aws_db_instance.lab-mysql","attribute":["db_name"]},{"resource":"data.aws_availability_zones.available","attribute":["names"]},{"resource":"aws_instance.web_server-ec2-to-rds","attribute":["public_dns"]},{"resource":"aws_cloudwatch_log_group.lab-1b-ec2-to-rds-logs","attribute":["name"]},{"resource":"aws_vpc_endpoint.endpoint_vpce_logs01","attribute":["id"]},{"resource":"aws_route53_zone.dns_zone01[0]","attribute":["zone_id"]},{"resource":"aws_iam_policy.policy_leastpriv_read_params01","attribute":["arn"]},{"resource":"aws_subnet.private-us-east-1b","attribute":["id"]},{"resource":"aws_cloudwatch_log_group.maximus_waf_log_group01[0]","attribute":["arn"]},{"resource":"aws_subnet.private-us-east-1a","attribute":["id"]},{"resource":"aws_vpc_endpoint.endpoint_vpce_s3_gw01","attribute":["id"]},{"resource":"aws_wafv2_web_acl.alb_waf01[0]","attribute":["arn"]},{"resource":"aws_vpc_endpoint.endpoint_vpce_secrets01","attribute":["id"]}],"timestamp":"2026-02-08T20:51:53Z","applyable":true,"complete":true,"errored":false}
